% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames*,x11names*}{xcolor}
%
\documentclass[]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}\pagecolor[RGB]{28,30,38} \color[RGB]{213,216,218}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={Manifolds},
  pdfauthor={Kexing Ying},
  colorlinks=true,
  linkcolor=Maroon,
  filecolor=Maroon,
  citecolor=Blue,
  urlcolor=red,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage[margin = 1.5in]{geometry}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\usepackage{tikz}
\usepackage{tikz-cd}
\usepackage{physics}
\usepackage{amsthm}
\usepackage{mathtools}
\usepackage[ruled,vlined]{algorithm2e}
\theoremstyle{definition}
\newtheorem{theorem}{Theorem}
\newtheorem{definition*}{Definition}
\newtheorem{prop}{Proposition}
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem*{remark}{Remark}
\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
\newtheorem{lemma}{Lemma}[section]
\newtheorem{proposition}{Proposition}[section]
\newtheorem{example}{Example}[section]
\newcommand{\diag}{\mathop{\mathrm{diag}}}
\newcommand{\Arg}{\mathop{\mathrm{Arg}}}
\newcommand{\hess}{\mathop{\mathrm{Hess}}}
% the redefinition for the missing \setminus must be delayed
\AtBeginDocument{\renewcommand{\setminus}{\mathbin{\backslash}}}

\title{Manifolds}
\author{Kexing Ying}
\date{July 24, 2021}

\begin{document}
\maketitle

{
\hypersetup{linkcolor=}
\setcounter{tocdepth}{2}
\tableofcontents
}
\newpage

\section{Introduction}

This module introduces the notion of manifolds and provides the infrastructure 
for generalizing theorems from calculus to manifolds. In particular, we will 
talk about 
\begin{itemize}
  \item Smooth manifolds and smooth functions;
  \item Tangent spaces and vector fields;
  \item Differential forms, integrations and Stoke's theorem.
\end{itemize}
In contrast to the curves and spaces module, instead of working on Euclidean spaces, 
we will define these notions for general manifolds. Thus, many definitions 
such as the tangent space will be defined in a more intrinsic point of view, without 
requiring our manifold to be within a Euclidean space.

Furthermore, a goal of this module is to differentiate between different manifolds, 
that is determine whether or not two manifolds are diffeomorphic with one another. 
This is achieved through introducing invariants such as the notion of differential 
forms and these notions will appear in many other places especially in geometry.

Manifolds is the subject of studying geometric shapes, and in mathematics, there 
are in general two ways of doing this. The first of which is by embedding the 
object into an ambient space such as \(\mathbb{R}^2\) or \(\mathbb{R}^3\). An 
example of this is studying the unit circle through the parametrisation 
\[\{(x, y) \mid x^2 + y^2 = 1\} \subseteq \mathbb{R}^2,\]
and is the more common method of what we have done thus far. On the other hand, 
one may study the object independently of the ambient space. This is the approach 
we shall take throughout this course. In particular, we will study spaces 
which at a local level ``looks like'' a Euclidean space directly without embedding 
the structure into \(\mathbb{R}^n\).

\newpage
\section{Topological and Smooth Manifolds}

Let us first recall some notions from topology.

\begin{definition}
  Let \(X, Y\) be topological spaces and let \(f : X \to Y\) be a function,
  then 
  \begin{itemize}
    \item \(f\) is continuous if \(f^{-1}(U)\) is open in \(X\) for all \(U\) open 
      in \(Y\).
    \item \(f\) is a homeomorphism if it is continuous and has a continuous inverse.
  \end{itemize}
\end{definition}

\begin{definition}
  A topological space \(X\) is 
  \begin{itemize}
    \item Hausdorff if for all \(x, y \in X\), \(x \neq y\), there exists open 
      sets \(U, V\) in \(X\) such that \(x \in U, y \in V\) and 
      \(U \cap V = \varnothing\).
    \item second-countable if there exists countable 
      \(\mathcal{F} \subseteq \mathcal{T}_X\) such that any open set in \(X\) 
      can be written as a union of elements of \(\mathcal{F}\), i.e. 
      \(\mathcal{F}\) is a countable basis of \(X\).
  \end{itemize}
\end{definition}

In general, in this module, we will assume our topology is Hausdorff and 
second-countable in order to avoid pathological examples in smooth and 
topological manifolds. 

\begin{definition}[Co-ordinate Chart]
  Let \(X\) be a topological space. A co-ordinate chart on \(X\) is 
  the collection of
  \begin{itemize}
    \item an open set \(U \subseteq X\),
    \item an open set \(\tilde U \subseteq \mathbb{R}^n\) for some \(n \ge 0\), 
    \item a homeomorphism \(f : U \to \tilde U\).
  \end{itemize}
  We denote a co-ordinate chart by \((U, f)\).
\end{definition}

\begin{definition}
  Let \(X\) be a (Hausdorff and second-countable) topological space. We say 
  that \(X\) is a topological manifold of dimension \(n\) if for all 
  \(x \in X\), there exists a co-ordinate chart \((U, f)\) with 
  \(\tilde U \subseteq \mathbb{R}^n\) such that \(x \in U\).
\end{definition}

The classical example of a topological manifold is the circle, in particular 
\[S^1 := \{(x, y) \mid x^2 + y^2 = 1\} \subseteq \mathbb{R}^2,\]
is a 1 dimensional topological manifold. Consider \(U_1 = S^1 \setminus \{(0, -1)\}\),
and we define the stereographic projection \(f_1 : U_1 \to \mathbb{R}\), 
\[f : (x, y) \mapsto \frac{x}{y + 1} := \tilde x.\]
It is not difficult to see that \(f_1\) is invertible with the inverse 
\[f_1^{-1} : \tilde x \mapsto \left(\frac{2\tilde x}{1 + {\tilde x}^2}, 
  \frac{1 - {\tilde x}^2}{1 + {\tilde x}^2}\right).\]
Furthermore, as \(f_1\) and \(f^{-1}\) are continuous, we have \((U_1, f_1)\) is 
a co-ordinate chart. Similarly, we define \(U_2 = S^1 \setminus \{(0, 1)\}\), 
and we my show the existence of a homeomorphism \(f_2 : U_2 \to \mathbb{R}\), 
providing the second co-ordinate chart \((U_2, f_2)\). Thus, as 
\(S^1 = U_1 \cup U_2\), we have \(S^1\) is a 1 dimensional topological manifold.

The above example can be expanded to \(n\)-dimensional sphere 
\[S^n := \{(x_0, \cdots, x_n) \mid x_0^2 + \cdots + x_n^2 = 1\} 
  \subseteq \mathbb{R}^n.\]
Similarly as before, we can construct two co-ordinate charts covering all points 
on the sphere except for the poles allowing us to conclude \(S^n\) is a 
\(n\)-dimensional topological manifold.

\begin{definition}[Transition Function]
  Let \(X\) be a topological manifold and let \((U_1, f_1)\) and \((U_2, f_2)\) 
  be two co-ordinate charts on \(X\) such that \(U_1 \cap U_2 \neq \varnothing\). 
  Then the transition function between these two co-ordinate charts is the 
  function 
  \[\phi_{21} := f_2 \circ f_1^{-1} : f_1(U_1 \cap U_2) \to f_2(U_1 \cap U_2).\]
\end{definition}

Let \(X\) be a topological manifold with co-ordinate charts \((U_i, f_i)\) for 
\(i = 1, 2, 3\) such that \(U_1 \cap U_2 \cap U_3 \neq \varnothing\). Then it 
is clear that \(\phi_{21} := f_2 \circ f_1^{-1}\) is a homeomorphism with 
the inverse \(\phi_{12} := f_1 \circ f_2^{-1}\). Furthermore, by considering 
\(\phi_{31} := f_3 \circ f_1^{-1}\) we observe 
\[\phi_{31} = (f_3 \circ f_2^{-1}) \circ (f_2 \circ f_1^{-1}) = 
  \phi_{32} \circ \phi_{21}.\]
This is known as the cocycle property and explains the subscript notation.

\begin{definition}[Atlas]
  Let \(X\) be a topological manifold. An atlas for \(X\) is the collection of
  co-ordinate charst \(\{(U_i, f_i)\}_{i \in I}\) such that 
  \[\bigcup_{i \in I} U_i = X.\]
\end{definition}

We note that we do not require the index set \(I\) to be finite. 
Although, since \(\{U_i\}_{i \in I}\) is an open cover, if \(X\) is compact, 
it is possible to obtain a finite sub-cover, and hence a finite atlas. Nonetheless, 
since we assumed \(X\) is second-countable, we can always choose \(I\) to be 
countable.

\subsection{Smooth Manifolds}

So far, we have only considered ourselves with the topological structure. As 
we would like to do calculus on our manifolds, we will now equip our manifolds 
with the property of smoothness. Recall the following definition for Euclidean 
spaces. 

\begin{definition}
  A function \(F : \mathbb{R}^n \to \mathbb{R}^n\) is smooth (or \(C^\infty\)) 
  if all the partial derivatives of \(F\) of any order exists.
\end{definition}

Of course, this is technically a property not a definition though it will suffice 
for our purposes.

\begin{definition}[Smooth Atlas]
  Let \(X\) be a topological manifold of dimension \(n\). Then an atlas 
  \(\{(U_i, f_i)\}_{i \in I}\) on \(X\) is smooth if for all \(i, j \in I\),
  the transition function 
  \[\phi_{ij} : f_j(U_i \cap U_j) \subseteq \mathbb{R}^n \to 
    f_i(U_i \cap U_j) \subseteq \mathbb{R}^n\]
  is smooth.
\end{definition}

Since \(\phi_{ij}\) is a (bijective) map between open subsets of Euclidean 
spaces, it makes sense to ask whether or not \(\phi_{ij}\) is smooth.

\begin{definition}[Diffeomorphism]
  Let \(U, V \subseteq \mathbb{R}^n\) be open sets and let \(f : U \to V\). 
  Then \(f\) is a diffeomorphism if \(f\) is smooth and has a smooth inverse.
\end{definition}

As \((\phi_{ij})^{-1} = \phi_{ji}\), and both \(\phi_{ij}\) and \(\phi_{ji}\) 
are smooth, the transition functions of any smooth manifold are diffeomorphisms.

\begin{definition}[Compatible]
  Let \(X\) be a topological manifold and let \(\mathcal{A} := \{(U_i, f_i)\}\) 
  be a smooth atlas. Let \((U, f)\) be any co-ordinate chart on \(X\), then 
  \((U, f)\) is compatible with the atlas \(\mathcal{A}\) if the transition 
  function between \((U, f)\) and any chart in \(\mathcal{A}\) is a 
  diffeomorphism.
\end{definition}

Clearly, any chart in a smooth atlas is compatible with that atlas, and if 
\((U, f)\) is compatible with the smooth atlas \(\mathcal{A}\), then 
\((U, f) \cup \mathcal{A}\) is also a smooth atlas.

\begin{definition}
  Let \(X\) be a topological manifold and \(\mathcal{A}, \mathcal{B}\) be 
  two atlases on \(X\). Then \(\mathcal{A}\) is compatible with \(\mathcal{B}\) 
  if every chart in \(\mathcal{B}\) is compatible with \(\mathcal{A}\).
\end{definition}

Similarly as before, if \(\mathcal{A}, \mathcal{B}\) are compatible, then 
\(\mathcal{A} \cup \mathcal{B}\) is a smooth atlas on \(X\).

\begin{lemma}
  Let \(X\) be a topological manifold and let 
  \[\mathcal{A} := \{(U_i, f_i)\}_{i \in I}, 
    \mathcal{B} := \{(U_j, f_j)\}_{j \in J},\]
  be two compatible smooth atlases on \(X\). Then for all \((U, f)\) co-ordinate 
  charts compatible with \(\mathcal{A}\), \((U, f)\) is compatible with 
  \(\mathcal{B}\).
\end{lemma}
\begin{proof}
  It suffices to show that for all \((U_j, f_j) \in \mathcal{B}\), 
  \(U \cap U_j \neq \varnothing\), the transition map 
  \[\phi := f_j \circ f^{-1} : f(U \cap U_j) \to f_j(U \cap U_j)\]
  and its inverse are smooth. 

  Let \(y \in f(U \cap U_j)\), then there exist some \(x \in U \cap U_j\) such 
  that \(f(x) = y\). As \(\mathcal{A}\) is an atlas, it contains a co-ordinate 
  chart \((U_i, f_i) \in \mathcal{A}\) such that \(x \in U_i\). Then, defining 
  \(W := U \cap U_i \cap U_j \neq \varnothing\), we have the homomorphisms 
  \(f : W \to f(W), f_i : W \to f_i(W)\) and \(f_j : W \to f_j(W)\). As 
  remarked before, we have 
  \[\phi = (f^{-1} \circ f_i) \circ (f_i^{-1} \circ f_j)\]
  on \(W\). Now, by compatibility, the right hand side is smooth, and so 
  we have \(\phi\) is smooth on \(W\) implying it is smooth at \(y\). Thus, 
  as \(y \in f(U \cap U_j)\) was arbitrary, \(\phi\) is smooth (by a similar 
  argument \(\phi^{-1}\) is also smooth) and \((U, f)\) is compatible with 
  \(\mathcal{B}\).
\end{proof}

With this lemma it is easy to see that compatibility defines an equivalence 
relation on the set of smooth atlases and with this we can define smooth 
manifolds.

\begin{definition}[Smooth Manifold]
  A smooth manifold is a topological manifold with an equivalence class 
  \([\mathcal{A}]\) of compatible smooth atlases on \(X\). The equivalence 
  class of atlases is called a smooth structure on \(X\).
\end{definition}

The reason for the definition considering only the equivalence class 
of compatible smooth atlases is because we do not want to distinguish between 
compatible smooth atlases. Indeed, recalling our example of a sphere, 
we would like to not consider the atlases which projects the sphere with 
respect to two other points that are not the poles as an alternative manifold.

From this point forward, we will always work with smooth manifolds and thus, 
omit the word ``smooth'' whenever it is clear from the context, i.e. a manifold 
is a smooth manifold and a atlas is a smooth atlas. 

\subsection{Submanifolds}

\begin{definition}[Affine Subspace]
  An affine subspace \(A \subseteq \mathbb{R}^n\) is a translation of a 
  linear subspace of \(\mathbb{R}^n\), i.e. there exists some \(v \in V\) and 
  \(W \le \mathbb{R}^n\) such that 
  \[A := v + W = \{v + w \mid w \in W\}.\]
\end{definition}

\begin{definition}[Submanifold]
  Let \(X\) be an \(n\)-dimensional manifold and let \(Y \subseteq X\). Then 
  \(Y\) is an \(m\)-dimensional submanifold of \(X\) if for all \(y \in Y\), 
  there exists a 
  \begin{itemize}
    \item a co-ordinate chart \((U, f)\) of \(X\) which is compatible with 
      the smooth structure of \(X\) such that \(y \in U\) and,
    \item an \(m\)-dimensional affine subspace \(A \subseteq \mathbb{R}^n\) 
      \[f(U \cap Y) = f(U) \cap A.\]
  \end{itemize}
\end{definition}

\begin{proposition}
  Let \(X\) be an \(n\)-dimensional manifold and \(Y\) an \(m\)-dimensional 
  submanifold of \(X\), then \(Y\) is an \(m\)-dimensional manifold.
\end{proposition}
\begin{proof}
  As \(Y\) is a topological subspace of \(X\), it is Hausdorff and 
  second-countable. Thus, it remains to show that \(Y\) is equipped with a 
  smooth structure. 

  By linear algebra, it is easy to see that the linear map 
  \(\tau : A = v + W \to W : a \mapsto a - v\) is continuously invertible, and thus, 
  for all \(y \in Y\) there exists a chart \((U, f' := \tau \circ f)\) of \(X\) 
  such that \(y \in U\) and \(f'(U \cap Y) = f'(U) \cap W\). 
  Let \(T : W \cong \mathbb{R}^m\), then defining the atlas 
  \[\{(U_y, \tilde f_y)\}_{y \in Y} := \{(U_y, T \circ f')\}_{y \in Y},\]
  for all \(a, b \in Y\), its transition map 
  \[\phi_{ab} = (T \circ \tau \circ f_b) \circ (T \circ \tau \circ f_a)^{-1}
    = T \circ \tau \circ (f_b \circ f_a^{-1}) \circ \tau^{-1} \circ T^{-1},\]
  is a composition of smooth functions, and thus is smooth. Hence \(Y\) is 
  a smooth manifold.
\end{proof}

Let \(f : \mathbb{R} \to \mathbb{R}\) be smooth, then 
define the set \(s_f := \{(x, y) \mid y = f(x)\} \subseteq \mathbb{R}^2\) and 
I claim that \(s_f\) is a submanifold of \(\mathbb{R}^2\). Define the chart 
\((U, g)\) on \(\mathbb{R}^2\) where \(U = \mathbb{R}^2\) and 
\[g(x, y) = (x, y - f(x)).\]
It is clear that \(g : \mathbb{R}^2 \to \mathbb{R}^2\) is a diffeomorphism as it 
is invertible with the inverse \(g^{-1}(x, y) = (x, y + f(x))\) and so, 
\(\{(U, g)\}\) is a smooth atlas of \(\mathbb{R}^2\). Now considering 
\(g\mid_{s_f} : s_f \to g(s_f) : (x, f(x)) \mapsto (x, 0)\) we have \(s_f\) is 
a smooth submanifold of \(\mathbb{R}^2\).

Let us recall the following proposition from year-two analysis.

\begin{proposition}[Inverse Function Theorem]
  Let \(U \subseteq \mathbb{R}^n\) be an open subset and let 
  \(F : U \to \mathbb{R}^n\) be smooth. Let \(x \in U\) such that the Jacobian 
  as \(x\), \(DF\mid_x : \mathbb{R}^n \to \mathbb{R}^n\) is an isomorphism, 
  then there exists an open neighbourhood \(V \subseteq U\) of \(x\) such that 
  \(F \mid_V : V \to F(V) \subseteq \mathbb{R}^n\) is a diffeomorphism.
\end{proposition}

\begin{corollary}
  A smooth, bijective function \(F : U \subseteq \mathbb{R}^n \to \mathbb{R}^n\) 
  which has non-zero Jacobian everywhere has a smooth inverse.
\end{corollary}

The inverse function theorem is useful for showing whether a subset of a manifold 
is a submanifold. Consider the circle \(S_1 := \{x^2 + y^2 = 1\}\) as a subset 
of the manifold \(\mathbb{R}^2\). Then, let 
\[U = \mathbb{R}^2 \setminus \{(x, 0) \mid x \le 0\} \text{ and } 
  f : U \to \mathbb{R}^2 : (r\cos \theta, r\sin \theta) \mapsto (r, \theta).\]
As \(f : U \to f(U)\) is smooth, bijective and has non-zero Jacobian on \(U\), 
then \(f^{-1} : f(U) \to U\) is also smooth. Thus, \((U, f)\) is a smooth chart 
on \(U \to \tilde U := \mathbb{R}^+ \times (-\pi, \pi) \subseteq \mathbb{R}^2\). 
Then, for all \((\cos \theta, \sin \theta) \in S_1 \setminus \{(-1, 0)\}\), 
we have \(f(\cos \theta, \sin \theta) = (1, \theta)\) implying 
\[f(U \cap S_1) = \{(1, \theta) \mid \theta \in (-\pi, \pi)\} = 
  f(U) \cap A,\]
where \(A\) is the affine subspace \((1, 0) + \{(0, y) \mid y \in \mathbb{R}\}\).
Hence \(S_1\) is a submanifold of \(\mathbb{R}^2\).

\begin{definition}[Level Sets]
  Let \(h : \mathbb{R}^n \to \mathbb{R}^k\) be a function and let 
  \(\alpha \in \mathbb{R}^k\). Then the level set of \(h\) at \(\alpha\) is 
  \[h^{-1}(\{\alpha\}) = 
    \{x \in \mathbb{R}^n \mid h(x)= \alpha\} \subseteq \mathbb{R}^n.\]
\end{definition}

\begin{definition}[Regular Points and Values]
  Let \(h : \mathbb{R}^n \to \mathbb{R}^k\) be a smooth function. A point 
  \(x \in \mathbb{R}^n\) is called a regular point of \(h\) if the Jacobian of 
  \(h\) at \(x\) 
  \[Dh\mid_x : \mathbb{R}^n \to \mathbb{R}^k\]
  is surjective.

  \(\alpha \in \mathbb{R}^k\) is called a regular value if every point of 
  the \(\alpha\)-level set \(h^{-1}(\{\alpha\})\) is regular.

  If \(x \in \mathbb{R}^n\) is not a regular point, then it is called a critical 
  point. Similarly, if \(\alpha \in \mathbb{R}^k\) is not a regular value, 
  then it is called a critical value. 
\end{definition}

\begin{definition}[Standard Projection]
  Let \(k \le n\). The standard projection is the morphism 
  \[\pi : \mathbb{R}^n \to \mathbb{R}^k : (x_1, \cdots, x_n) \mapsto 
    (x_{n-k+1}, \cdots, x_n).\]
  That is \(\pi\) forgets the first \(n-k\) entries.
\end{definition}

Level sets are a useful tool for constructing submanifolds.

\begin{theorem}[Implicit Function theorem]
  Let \(U \subseteq \mathbb{R}^n\) be an open subset and let 
  \(h : U \to \mathbb{R}^k\) be a smooth function where \(k \le n\). Let 
  \(z \in U\) be a regular point of \(h\). Then there exists an open 
  neighbourhood \(V \subseteq U\) of \(z\) and a diffeomorphism 
  \[f : V \to f(V) \subseteq \mathbb{R}^n \text{ s.t. } 
    h \circ f^{-1} = \pi : f(V) \to \mathbb{R}^k.\]
\end{theorem}

Informally, this theorem states that a smooth function around a regular point 
looks like the standard projection.

\begin{proof}
  Let \(x_1, \cdots, x_n\) be co-ordinates on \(\mathbb{R}^n\) and let 
  us write 
  \[h(x) = (h_1(x), \cdots, h_k(x)).\] 
  As \(z\) is regular, we have \(Dh\mid_z : \mathbb{R}^n \to \mathbb{R}^k\) is 
  surjective and thus, possibly by reordering, the set 
  \[\left\{\pdv{h(z)}{x_{n-k+1}}, \cdots, \pdv{h(z)}{x_n}\right\}\]
  form a basis of \(\mathbb{R}^k\) and the matrix 
  \[M := \begin{pmatrix}
    \pdv{h_1(z)}{x_{n-k+1}} & \cdots & \pdv{h_1(z)}{x_n} \\
    \vdots & & \vdots \\
    \pdv{h_k(z)}{x_{n-k+1}} & \cdots & \pdv{h_k(z)}{x_n}
  \end{pmatrix}\]
  is invertible. Then, by defining 
  \[f : U \to f(U) : (x^1, \cdots, x^n) \mapsto 
    (x^1, \cdots, x^{n - k}, h_1(x), \cdots, h_k(x)),\]
  we have, 
  \[Df\mid_z = 
  \left(\begin{array}{c|c}
    I_{n - k} & 0\\
    \hline
    \star & M
  \end{array}\right)\]
  which is invertible as \(\det Df\mid_z = \det I_{n-k} \det M = \det M \neq 0\).
  Thus, by the inverse function theorem, there exists some open \(V \subseteq U\) 
  such that \(f : V \to f(V)\) is a diffeomorphism. Then, by considering 
  \(\pi \circ f = h\), we have \(\pi = h \circ f^{-1}\).
\end{proof}

\begin{corollary}
  If \(h : \mathbb{R}^n \to \mathbb{R}^k\) is a smooth function, and \(\alpha\) 
  is a regular value, then the level set of \(h\) at \(\alpha\) is a submanifold 
  of \(\mathbb{R}^n\) of dimension \(n - k\).
\end{corollary}
\begin{proof}
  For all \(z \in h^{-1}(\{\alpha\})\), we have \(z\) is a regular point. Thus, 
  by the above theorem, there exists an open neighbourhood \(V\) of \(z\) and a 
  diffeomorphism \(f : V \to f(V)\) such that \(h \circ f^{-1} = \pi\). Then, 
  \[f(h^{-1}(\{\alpha\}) \cap V) = f(h^{-1}(\{\alpha\})) \cap f(V) = 
    \pi^{-1}(\{\alpha\}) \cap f(V).\]
  Hence, as \(\pi^{-1}(\{\alpha\}) = 
  \{(x_1, \cdots, x_{n - k}, \alpha_1, \cdots, \alpha_k)\} = \alpha + A_{n - k}\),
  we have \(h^{-1}(\{\alpha\})\) is a submanifold of dimension \(n - k\).
\end{proof}

This corollary is extremely useful. Consider the sphere 
\(S^n = \{x_0^2 + \cdots + x_n^2 = \alpha\}\), by defining 
\(h : \mathbb{R}^n \to \mathbb{R} : (x_0, \cdots, x_n) \mapsto 
x_0^2 + \cdots + x_n^2\), we see that \(h\) is smooth with the the Jacobian 
\[Dh\mid_x = (2x_0, \cdots, 2x_n).\]
Thus, \(\alpha\) is a regular value of \(h\) for all \(\alpha > 0\). Hence, 
\(S^n = \{h(x) = \alpha\}\) is a submanifold of \(\mathbb{R}^{n+1}\) for 
all \(\alpha > 0\).

\begin{theorem}[Sard's Theorem]
  Let \(h : \mathbb{R}^n \to \mathbb{R}^k\) be a smooth function. Then the set 
  of regular values \(Z \subseteq \mathbb{R}^k\) is dense. Furthermore, 
  \(\mathbb{R}^k \setminus Z\) has Lebesgue measure zero.
\end{theorem}

\subsection{Smooth Functions}

We know what a smooth function between two Euclidean spaces is. We will extend 
this notion to functions between two manifolds. 

\begin{definition}
  Let \(X\) be a manifold and let \(h : X \to \mathbb{R}\) be a function. Then 
  \(h\) is said to be smooth at \(x \in X\) if for any chart \((U, f)\) containing 
  \(x\) such that it is compatible with the smooth structure of \(X\), the 
  function 
  \[h \circ f^{-1} : f(U) \to \mathbb{R}\]
  is smooth at the point \(f(x)\).

  We say \(h\) is smooth if it is smooth at all points in \(X\).
\end{definition}

It is not difficult to see that smoothness is independent of the chart we 
pick, i.e. \(h\) is smooth at \(x\) as long as there exists a compatible chart 
\((U, f)\) containing \(x\) such that \(h \circ f^{-1}\) is smooth at \(x\).

\begin{proposition}
  Let \(X\) be a manifold and let \(h : X \to \mathbb{R}\) be a function. Then, 
  if \((U_1, f_1), (U_2, f_2)\) are two compatible charts on \(X\) such that 
  \(x \in U_1 \cap U_2\), \(h \circ f_1^{-1}\) is smooth at \(x\) if and only if 
  \(h \circ f_2^{-1}\) is smooth at \(x\).
\end{proposition}
\begin{proof}
  Since the two charts are compatible the transition function 
  \(\phi_{12} = f_1 \circ f_2^{-1}\) is smooth. Thus, if \(h \circ f_1^{-1}\) 
  is smooth at \(f_1(x)\), so is 
  \[h \circ f_1^{-1} \circ \phi_{12} = h \circ f_1^{-1} \circ f_1 \circ f_2^{-1} 
    = h \circ f_2^{-1}.\]
  Similar argument for the other direction.
\end{proof}

Thus, to show that \(h\) is smooth at some \(x\), it suffices to find a compatible 
chart \((U, f)\) at \(x\) such that \(h \circ f^{-1}\) is smooth at \(f(x)\).

\begin{definition}[Smooth]
  Let \(X, Y\) be manifolds of dimension \(n\) and \(m\). Then a function 
  \(H : X \to Y\) is smooth at \(x \in X\) if there exists a chart 
  \((U, f)\) compatible with the smooth structure of \(X\) such that \(x \in U\) 
  and a chart \((V, g)\) compatible with the smooth structure of \(Y\) such that 
  \(H(x) \in V\) and \(H(U) \subseteq V\) and
  \[g \circ H \circ f^{-1} : f(U) \subseteq \mathbb{R}^n \to g(V) 
    \subseteq \mathbb{R}^m\]
  is smooth at \(f(x)\).

  We say \(H\) is smooth if it is smooth at all points in \(X\).
\end{definition}

In the case that \(H\) is a continuous function, we see that the condition of 
\(H(U) \subseteq V\) can be relaxed by considering the chart on \(X\), 
\((U \cap H^{-1}(V), f)\) in which \(U \cap H^{-1}(V) \subseteq V\) is open 
by the continuity of \(H\).

\begin{definition}[Diffeomorphism]
  A function \(H : X \to Y\) between manifolds is said to be a diffeomorphism 
  if it is smooth, a bijection, and \(H^{-1}\) is smooth.
\end{definition}

Similar to before, the definition of smoothness is independent of the choice 
of the charts (consider \(\phi^Y_{21} \circ g_1 \circ h \circ f_1 \circ \phi^X_{12}\)).

\begin{proposition}
  Let \(Y \subseteq X\) be a submanifold of \(X\) and let 
  \[\iota_Y : Y \hookrightarrow X\]
  be the inclusion map from \(Y\) to \(X\). Then \(\iota_Y\) is smooth.
\end{proposition}
\begin{proof}
  Let \(y \in Y\), then by definition, there exists a chart \((V, g)\) on 
  \(X\) containing \(y\) such that \(g(V \cap Y) = g(V) \cap A\) for some 
  \(A\) an affine space. Then defining \(U = V \cap Y\) and \(f = g\mid_U\), 
  we have \((U, f)\) is a chart on \(Y\) and \(g \circ \iota_Y \circ f^{-1}\) 
  is the identity on \(f(U)\). Thus \(\iota_Y\) is smooth.
\end{proof}

\begin{proposition}
  Let \(X, Y, Z\) be manifolds and let \(H : X \to Y\) and \(G : Y \to Z\) be
  smooth, then \(G \circ H\) is also smooth.
\end{proposition}
\begin{proof}
  Follows by considering 
  \[g \circ G \circ f_1^{-1} \circ \phi_{12} \circ f_2 \circ H \circ h = 
    g \circ (G \circ H) \circ h,\]
  for some appropriately chosen charts which is restricted whenever necessary. 
\end{proof}

From the two propositions above, we see that the restriction of any smooth 
maps on a submanifold is smooth as \(F\mid_Y = F \circ \iota_Y\). In particular, 
we have that any smooth maps between Euclidean spaces restricted on some 
submanifolds of that Euclidean space is smooth (e.g. any smooth map restricted 
on the \(n\)-sphere is smooth).

\begin{definition}[Product Manifold]
  Given \(X, Y\) manifolds of dimension \(n\) and \(m\). Then the Cartesian 
  product \(X \times Y\) is a manifold of dimension \(n + m\).
\end{definition}

To see why this is a topological manifold, consider for all 
\((x, y) \in X \times Y\) we may choose a chart \((U, f)\) on \(X\) such that \(x \in U\) and a chart 
\((V, g)\) in \(Y\) such that \(y \in V\). Then, if we define 
\(W := U \times V\) and \(h : W \to h(W) \subseteq \mathbb{R}^{n + m} := 
(x, y) \mapsto (f(x), g(y))\), we have \((W, h)\) is a chart of \(X \times Y\) 
containing \((x, y)\). Similarly, using the same construction, if \(X, Y\) are 
smooth, one may show that \(X \times Y\) is also smooth.

\begin{definition}[Lie Group]
  A Lie group is a manifold \(G\) which has a group structure \((G, \cdot)\) 
  such that the multiplication and the inverse are both smooth.
\end{definition}

An important example of a Lie group is the general linear group. In particular, 
as the space \(M_n(\mathbb{R})\) of all \(n \times n\) matrices of real 
coefficients is a vector space of dimension \(n^2\), it is an \(n^2\)-dimensional 
manifold. Now, as \(GL_n(\mathbb{R})\) is an open subset of \(M_n(\mathbb{R})\), 
it follows that it is also an \(n^2\)-dimensional manifold. Now, as 
\(GL_n(\mathbb{R})\) is a group equipped with matrix multiplication, one may 
show that it is a Lie group by checking that the multiplication and the inverse 
are smooth.

\subsubsection{Rank of a Smooth Function}

For linear maps between Euclidean spaces, we have a notion of a rank by considering 
the dimension of the image of that map. Similarly, for smooth functions between 
Euclidean spaces, its rank is defined by considering the rank of its derivative.
We will in this section extend this notion for smooth functions between manifolds.

\begin{definition}[Rank]
  Let \(X, Y\) be manifolds of dimension \(n\) and \(k\), and let \(H : X \to Y\) 
  be a smooth function. Let \(x \in X\) and let \((U, f)\) be a chart on \(X\) 
  such that \(x \in U\), and \((V, g)\) be a chart on \(Y\) at \(H(x)\) such 
  that \(H(U) \subseteq V\). Then, we may define 
  \[\tilde H := g \circ H \circ f^{-1} : f(U) \to g(V).\]
  As \(\tilde H\) is a smooth function between Euclidean spaces, it has 
  a Jacobian at \(f(x)\), 
  \[D \tilde H \mid_{f(x)} : \mathbb{R}^n \to \mathbb{R}^k.\]  
  Then the rank of \(H\) at \(x\) is simply the rank of \(D \tilde H \mid_{f(x)}\).
\end{definition}

It is clear that the rank of a smooth function at a point is independent of the 
choice of the chart as the transition functions are diffeomorphisms. In particular, 
if \(\tilde H\) and \(\tilde H'\) results from two different choices of charts, we 
have \(\tilde H' = \psi^{-1} \circ \tilde H \circ \phi\) where \(\psi\) and 
\(\phi\) are appropriate transition maps. Then, by the chain rule, we have 
\[D \tilde H' \mid_{f'(x)} = D\psi^{-1} \mid_{g(H(x))} \circ D 
  \tilde H\mid_{f(x)} \circ D \phi\mid_{f'(x)}.\]
Now, as \(\phi, \psi\) are diffeomorphisms, both \(D\psi^{-1} \mid_{g(H(x))}\) 
and \(D \phi\mid_{f'(x)}\) are invertible, and hence, the rank of 
\(D \tilde H' \mid_{f'(x)}\) is the same as \(D \tilde H \mid_{f(x)}\).

\begin{definition}[Regular]
  Let \(X, Y\) be manifolds of dimension \(n\) and \(k\), and let \(F : X \to Y\) 
  be a smooth function. Then \(x \in X\) is said to be a regular point if the 
  rank of \(F\) at \(x\) is \(k\). If \(x\) is not regular, then it is 
  called a critical point.

  Furthermore, \(y\in Y\) is called a regular value if every point 
  \(x \in F^{-1}(y)\) is regular. Otherwise, it is called a critical value.
\end{definition}

\begin{lemma}
  Let \(X, Y\) be manifolds of dimension \(n\) and \(k\), and let \(F : X \to Y\)
  be a smooth function. Let \(y \in Y\) be a regular value of \(F\). Then 
  the level set 
  \[Z_y := F^{-1}(y) \subseteq X\]
  is a submanifold of \(X\) of dimension \(n - k\).
\end{lemma}
\begin{proof}
  Let \(x \in Z_y\), then there exists a chart \((U, f)\) on \(X\) containing 
  \(x\) and a chart \((V, g)\) on \(Y\) containing \(F(U)\). Then we have the 
  smooth function 
  \[\tilde F := g \circ F \circ f^{-1} : f(U) \to g(V).\]
  Then by construction, we have \(\tilde F^{-1}(g(y)) = f(Z_y \cap U)\). Now, 
  since \(y\) is a regular value of \(F\), \(x\) is a regular point of \(F\), and 
  so \(f(x)\) is a regular point of \(\tilde F\). Then, as \(x \in Z_y \cap U\) 
  was chosen arbitrarily, \(\tilde F^{-1}(g(y))\) is a regular set (by choosing the 
  same chart for all \(x \in \tilde F^{-1}(g(y))\)). Thus, the set 
  \(\tilde F^{-1}(g(y))\) is a submanifold of \(\mathbb{R}^n\), and by definition, 
  there exists a chart \((W, h)\) containing \(f(x)\) such that 
  \[h(\tilde F^{-1}(g(y))) = h(W) \cap A,\]
  for some affine subspace \(A\). Hence, it follows \((f^{-1}(W), h \circ f)\) is 
  a co-ordinate chart on \(X\) such that 
  \[h \circ f(f^{-1}(W) \cap Z_y) = h \circ f(f^{-1}(W)) \cap A.\]
\end{proof}

\subsubsection{Immersion and Submersion}

\begin{definition}
  Let \(X, Y\) be manifolds of dimension \(n\) and \(k\), and let \(F : X \to Y\) 
  be a smooth function. Then \(F\) is said to be a submersion if the rank of 
  \(F\) at any \(x \in X\) is \(k\). Furthermore, \(F\) is said to be an 
  immersion if the rank of \(F\) at any \(x \in X\) is \(n\).
\end{definition}

Thus, \(F\) is a submersion if its Jacobian at any point \(x\) is surjective. 
Similarly, \(F\) is a immersion of its Jacobian at any point \(x\) is injective.

\begin{lemma}
  Let \(Y \subseteq X\) be a \(m\)-dimensional submanifold, then the inclusion 
  map 
  \[\iota : Y \hookrightarrow X\]
  is an immersion.
\end{lemma}
\begin{proof}
  By the definition of a submanifold, for all \(y \in Y\), there exists 
  some chart \((V, g)\) of \(X\) containing \(y\) such that 
  \[g(V \cap Y) = g(Y) \cap A,\]
  for some affine subspace \(A\). Then, restricting the chart on to \(Y\), 
  we have \((V \cap Y, g\mid_Y)\) is a chart on \(Y\) containing \(y\). Thus, 
  \[\tilde \iota := g \circ \iota \circ g\mid_Y^{-1} = \text{Id}_{g(V \cap Y)}.\]
  Hence, as \(D \tilde \iota\mid_{g(y)} = D \text{Id}_{g(V \cap Y)}\mid_{g(y)}\) has 
  dimension \(m\), \(\iota\) is a immersion.
\end{proof}

\begin{proposition}
  Let \(X, Y\) be \(n\)-dimensional manifolds, and let \(F : X \to Y\) be a 
  function which is smooth, bijective and of rank \(n\) at any point \(x \in X\). 
  Then \(F\) is a diffeomorphism.
\end{proposition}
\begin{proof}
  It suffices to show that \(F^{-1}\) is smooth. For all \(y \in Y\), let 
  \((U, f)\) be a chart of \(F^{-1}(y)\) on \(X\) and \((V, g)\) be a chart of 
  \(Y\) containing \(f(U)\). Then, by definition, 
  \[\tilde F := g \circ F \circ f^{-1} : f(U) \to g(V)\]
  is smooth with invertible derivative \(D \tilde F\mid_{f(F^{-1}(y))}\). 
  By the inverse function theorem, \(\tilde F^{-1} = f \circ F^{-1} \circ g^{-1}\) 
  is locally smooth at \(g^{-1}(y)\) with derivative 
  \(D F^{-1}\mid_{g(y)} = D \tilde F\mid_{f(F^{-1}(y))}^{-1}\). Thus, as 
  \(y \in Y\) was chosen arbitrarily, \(F^{-1}\) is smooth at any \(y \in Y\), 
  and so \(F^{-1}\) is smooth. 
\end{proof}

\begin{proposition}
  If \(X, Y\) are manifolds of dimension \(n\) and \(k\), the projection map 
  \[p_1 : X \times Y \to X : (x, y) \mapsto x\]
  is a submersion.
\end{proposition}
\begin{proof}
  Exercise.
\end{proof}

\begin{proposition}
  Let \(X, Y\) be manifolds of dimension \(n\) and \(k\), and let \(F : X \to Y\) 
  be a submersion (so \(k \le n\)). Then \(F\) is an open map, i.e. for any 
  open subset \(W \subseteq X\), \(F(W)\) is open in \(Y\).
\end{proposition}
\begin{proof}
  Let \(y \in F(W)\) and we will show that \(F(W)\) is locally open as \(y\). 
  Let \(x \in F^{-1}(y) \cap W\) and suppose \((U, f)\) be a chart at \(x\) 
  contained in \(W\) and \((V, g)\) be a chart at \(y\) such that 
  \(F(U) \subseteq V\). Since \(F\) is a submersion, the function 
  \[\tilde F := g \circ F \circ f^{-1} : f(U) \to g(V)\]
  is smooth and has rank \(k\) at \(f(x)\), and so \(f(x)\) is a regular point 
  of \(\tilde F\). Then, by the implicit function theorem, 
  there exists an open set \(U' \subseteq f(U)\) containing \(f(x)\) and a 
  diffeomorphism \(h : U' \to h(U')\) such that 
  \(\tilde F \circ h^{-1} = \pi : h(U') \to \mathbb{R}^k\) is the standard 
  projection.

  Now as the standard projection and diffeomorphisms are an open maps, we have 
  \(\tilde F = \pi \circ h\) is also an open map, and in particular, 
  \(\tilde F(U')\) is open. Hence, as \(g\) is a homeomorphism, 
  \(\tilde F(U') = g(F(f^{-1}(U')))\) is open in \(g(V)\) implies 
  \(F(f^{-1}(U')) \subseteq F(U) \subseteq F(W)\) is open in \(Y\). Thus, 
  \(F(W)\) is locally open at \(y\), and so \(F(W)\) is open and \(F\) is an 
  open map.
\end{proof}

\newpage
\section{Tangent Spaces}

The tangent space of a surface is a intuitive concept and for a surface 
in \(\mathbb{R}^n\), we may often define it to be an affine subspace of 
\(\mathbb{R}^n\) tangent to the surface at a point \(x\). This definition in 
requires an ambient space and so is not generalizable to manifolds. We will 
in this section define a new notion of tangent spaces which applies to manifolds.

Let \(U \subseteq \mathbb{R}^n\). Let \(x \in U\), then a curve \(\sigma\) 
through \(x\) is a smooth function from \((-\epsilon, \epsilon)\) to \(U\) 
for some \(\epsilon > 0\) and \(\sigma(0) = x\). Then, we define the tangent 
vector of \(\sigma\) at the point \(x\) to be the Jacobian \(D\sigma\mid_0\).

The space of curves is massive though we really only care about their tangent 
vectors, and so we introduce an equivalence relation which we will take 
the quotient by. Let \(\sigma_1, \sigma_2\) are two curves through \(x\), 
then we say \(\sigma_1 \sim \sigma_2\) if and only if 
\(D\sigma_1\mid_0 = D\sigma_2 \mid_0\). Then, we define the tangent space of 
\(U\) at \(x\) to be, 
\[T_xU := \{\sigma : (-\epsilon, \epsilon) \to U \mid \sigma 
  \text{ smooth curve through } x\} / \sim.\]
We have a natural bijection 
\[\Delta_x : T_xU \to \mathbb{R}^n : [\sigma] \mapsto D\sigma\mid_0.\]
In particular, for all \(v \in \mathbb{R}^n\), we can define 
\(\sigma : (-\epsilon, \epsilon) \to U : t \mapsto x + tv\) such that 
\(D\sigma\mid_0 = v\) and so \(\Delta_x\) is surjective.

This definition can be extended to manifolds easily. 

\begin{definition}[Curves]
  Let \(X\) be a \(n\)-dimensional manifold and let \(x \in X\). Then a 
  curve through \(x\) is a smooth function 
  \[\sigma : (-\epsilon, \epsilon) \to X,\]
  such that \(\sigma(0) = x\).
\end{definition}

\begin{definition}
  Let \(X\) be a \(n\)-dimensional manifold and let \(x \in X\) and 
  \(\sigma\) be a curve through \(x\). Then, given a chart \((U, f)\) 
  containing \(x\), we may define \(\tilde \sigma := f \circ \sigma : 
  (-\epsilon, \epsilon) \to f(U)\), i.e. \(\tilde \sigma\) is a curve through 
  \(f(x)\). Finally, if \(\sigma_1, \sigma_2\) are curves through \(x\), we 
  say 
  \[\sigma_1 \sim \sigma_2 \iff \tilde \sigma_1 \sim \tilde \sigma_2.\]
\end{definition}

For the above definition to be well-defined, we will need to check it is 
independent of the choice of the chart. Let \((U_1, f_1), (U_2, f_2)\) be two 
charts of \(X\) containing \(x\). Then, if 
\(f_1 \circ \sigma_1 \sim f_1 \circ \sigma_2\), we have 
\[\begin{split}
  D(f_2 \circ \sigma_1)\mid_0 & = D(\phi_{12} \circ f_1 \circ \sigma_1)_0 
    = D(\phi_{12})\mid_{f_1(x)} \circ D(f_1 \circ \sigma_1)_0 \\ 
  & = D(\phi_{12})\mid_{f_1(x)} \circ D(f_1 \circ \sigma_2)_0 
    = D(\phi_{12} \circ f_1 \circ \sigma_2)_0 
    = D(f_2 \circ \sigma_2)\mid_0.
\end{split}\]

\begin{definition}[Tangent Space]
  Let \(X\) be a \(n\)-dimensional manifold and let \(x \in X\), then the 
  tangent space of \(X\) at \(x\) is 
  \[T_xX := \{\sigma : (-\epsilon, \epsilon) \to X \mid \sigma 
    \text{ is a curve through } x\} / \sim.\]
  We call elements of \(T_xX\) tangent vectors.
\end{definition}

Let \((U, f)\) be a chart of \(X\) containing \(x\). Then, we have a bijection 
\[T_x X \to T_{f(x)}f(U) : [\sigma] \mapsto [f \circ \sigma].\]
Now as \(f(U)\) is an open subset of \(\mathbb{R}^n\), there exists a bijection 
\(\Delta_{f(x)} : T_{f(x)}f(U) \to \mathbb{R}^n\). Composing the two functions, 
we obtain a bijection 
\[\Delta_f : T_xX \to \mathbb{R}^n : [\sigma] \mapsto D(f \circ \sigma)\mid_0.\]
With this function, we may equip the tangent space with a vector space 
structure. In particular, for all \(\alpha \in \mathbb{R}, v, w \in T_xX\), 
we define \(\alpha \cdot v := \Delta_f^{-1}(\alpha \cdot \Delta_f(v))\) and 
\(v + w := \Delta^{-1}_f (\Delta_f(v) + \Delta_f(w)).\)

We note that \(\Delta_f\) depends on the choice of the chart. On the other 
hand, the vector space structure on \(T_xX\) is independent of the choice of 
the chart (Hint : \(\Delta_{f_2} = D\phi_{21}\mid_{f_1(0)} \circ \Delta_{f_1}\)).

The tangent space allow us to talk about the Jacobian of a smooth function between 
to manifolds. 

\begin{definition}[Jacobian of Smooth Functions]
  Let \(X, Y\) be manifolds and let \(F : X \to Y\) be a smooth function. 
  We define the Jacobian at \(x \in X\) as 
  \[DF\mid_x T_xX \to T_{f(x)}Y : [\sigma] \mapsto [F \circ \sigma].\]
\end{definition}

One may check that \(DF\mid_x\) is well-defined and is a linear map using 
similar arguments as above (hint: for linearity, show \(DF\mid_x = 
\Delta_g^{-1} \circ D\tilde F\mid_x \circ \Delta_f\) where 
\(\tilde F = g \circ F \circ f^{-1}\)). Furthermore, as one might expect, 
the rank of a smooth function is simply the rank of \(DF\mid_x\).

\subsection{Tangent Space to Submanifolds}

Let \(Z\) is a \(m\)-dimensional submanifold of \(X\), then as we have shown 
before, the inclusion map \(\iota : Z \hookrightarrow X\) is a smooth immersion. 
Then, each curve in \(Z\) is a curve in \(X\) and so, for all \(z \in Z\), 
we may define the linear injection 
\[D\iota\mid_z : T_z Z \hookrightarrow T_z X : [\sigma] \mapsto [\sigma].\]
In this sense, we can view \(T_z Z\) as a subspace of \(T_z X\), and we can 
see this explicitly in co-ordinates. Let \((U, f)\) be a chart of \(X\) containing 
\(z\) such that 
\[f(U \cap Z) = f(U) \cap \mathbb{R}^m.\]
Then, by considering for all curves \(\sigma\) in \(Z\) through \(z\), we have 
\[\Delta_f(\sigma) = f \circ \sigma : (-\epsilon, \epsilon) \to Z \to \mathbb{R}^m,\]
for sufficiently small \(\epsilon > 0\); and hence, 
\(\Delta_f(T_z Z) \subseteq \mathbb{R}^m\). Now, as \(\Delta_f\) is linear 
isomorphism between \(T_z X\) and \(\mathbb{R}^n\), \(\Delta_f(T_z Z)\) must be 
a subspace of \(\mathbb{R}^n\) of \(m\) dimension, and so 
\(\Delta_f(T_z Z) = \mathbb{R}^m\).

\begin{lemma}
  If \(X, Y\) are manifolds of dimension \(n\) and \(m\) respectively, and
  \(F : X \to Y\) is a smooth function. Then, for all regular points \(x \in X\), 
  there exists a chart \((U, f)\) of \(X\) containing \(x\) and \((V, g)\) of 
  \(Y\) containing \(F(x)\) such that, 
  \[\pi = g \circ F \circ f^{-1} : f(U) \to g(V),\]
  where \(\pi : \mathbb{R}^n \to \mathbb{R}^m\) is the standard projection.
\end{lemma}
\begin{proof}
  Choose a chart \((W, h)\) at \(x\), and \((V, g)\) at \(F(x)\), then by 
  the definition of smoothness, we have \(g \circ F \circ h^{-1}\) is smooth. 
  Now, as \(x\) is a regular point, \(D(g \circ F \circ h^{-1})\mid_{h(x)}\) is a 
  surjection, and so, by the implicit function theorem, there exists an open set 
  \(U' \subseteq h(W)\) containing \(h(x)\) and a diffeomorphism 
  \(f' : U' \to f'(U')\) such that 
  \[g \circ F \circ h^{-1} \circ f'^{-1} : f'(U') \to g(V),\]
  is the standard projection. Thus, defining \(U := h^{-1}(U')\) and 
  \(f := h^{-1} \circ f'^{-1}\), we have found a chart \((U, f)\) of \(X\) 
  containing \(x\) such that 
  \[g \circ F \circ f^{-1} : f(U) \to g(V)\]
  is the restriction of the standard projection.
\end{proof}

\begin{lemma}
  Let \(X\) be an \(n\)-dimensional manifold and let \(Y\) be an \(m\)-dimensional 
  manifold where \(m \le n\). Let \(F : X \to Y\) be a smooth function and let 
  \(y \in Y\) be a regular value of \(F\). Then, if \(Z = F^{-1}(\{y\})\) and 
  \(z \in Z\), \(T_z Z\) is the kernel of the linear map 
  \[DF\mid_z : T_z X \to T_y Y.\]
\end{lemma}
\begin{proof}
  By the above lemma, there exists a chart \((U, f)\) of \(X\) containing 
  \(z\) and a chart \((V, g)\) of \(Y\) containing \(y = F(z)\) and 
  (Wlog. by translating) \(g(y) = 0\), such that
  \(\tilde F = g \circ F \circ f^{-1} : f(U) \to g(V)\) 
  is the restriction of the standard projection and so,
  \[DF\mid_z = \Delta_g^{-1} \circ D\tilde F\mid_z \circ \Delta_f = 
  \Delta_g^{-1} \circ \pi\mid_z \circ \Delta_f,\]
  where \(\pi\) has the kernel \(\mathbb{R}^{n - m}\). Now, by considering 
  \[f(Z \cap U) = \tilde F^{-1}(g(y)) = f(U) \cap \pi^{-1}(y),\]
  as the kernel of \(D\tilde F\) is simply \(T_z Z\) as 
  \(T_z Z \simeq \mathbb{R}^{n - m}\) and \(D\tilde F \simeq \pi\) using 
  the chosen chart.
\end{proof}

Consider the Lie group \(GL_n(\mathbb{R}) \subseteq M_n(\mathbb{R})\). It 
is not difficult to show that the determinant map 
\[\det GL_n(\mathbb{R}) \to \mathbb{R} : A \mapsto \det A\]
is a smooth function. We will show that \(1\) is a regular value of 
\(\det\) and so the special linear group (note that \(SL_n(\mathbb{R})\) is 
a subgroup of \(GL_n(\mathbb{R})\))
\[SL_n(\mathbb{R}) := \{A \in M_n(\mathbb{R}) \mid \det A = 1\}\]
is a submanifold of \(GL_n(\mathbb{R})\) and so is a Lie group.

Recall that the determinant of the matrix \(A\) is 
\(\det A = \sum_{j = 1}^n (-1)^{i + j}a_{ij}\det A_{ij}\),
for any \(i = 1,\cdots, n\),
where \(a_{ij}\) is the \((i, j)\)-th entry of \(A\) and \(A_{ij}\) is the 
\((i, j)\)-th minor of \(A\). Thus, 
\[\pdv{\det}{a_{ij}}\mid_A = (-1)^{i + j} \det A_{ij}\] 
since the minor 
\(\det A_{ij}\) is independent of \(a_{ij}\). Hence, it follows that if 
\(A \in \det^{-1}(1)\) is critical, then \(\det A_{ij} = 0\) for all \(i, j\) 
which implies \(\det A = 0\), a contradiction! \# Thus, \(SL_n(\mathbb{R})\) is 
a submanifold of \(GL_n(\mathbb{R})\) of dimension \(n^2 - 1\). With this, 
we may compute the tangent space of \(SL_n(\mathbb{R})\) at some \(A\) by 
\[T_A SL_n(\mathbb{R}) = \ker D(\det)\mid_A =
  \{x \in GL_n(\mathbb{R}) \mid x \cdot [(-1)^{i + j} \det A_{ij}]_{ij} = 0\}.\]

\subsection{Vector Fields and Flows}

In the case of \(\mathbb{R}^n\), we have a good intuition for what a vector field
is, i.e. a smooth function from \(U \subseteq \mathbb{R}^n\) open which maps 
\(x \in U\) to a vector in \(T_x U \simeq \mathbb{R}^n\). In this sense the 
codomain of a vector field is a union of all tangent spaces. This motivates the 
following definition.

\begin{definition}
  The tangent bundle of the open set \(U \subseteq \mathbb{R}^n\) is defined 
  to be 
  \[TU := \bigcup_{x \in U} T_x U \simeq U \times \mathbb{R}^n,\]
  where the homeomorphism follows as \(T_x U \simeq \mathbb{R}^n\) for all 
  \(x \in U\).
\end{definition}

As \(TU\) is the product of two \(n\)-dimensional manifolds, if is a manifold 
of dimension \(2n\).

\begin{definition}
  A vector field on the open set \(U \subseteq \mathbb{R}^n\) is a smooth 
  function \(\xi : U \to TU\) such that \(\pi \circ \xi = \text{id}_U\) where 
  \(\pi : TU \to U\) is the projection map \((x, v) \mapsto x\).
\end{definition}

Thus, for all \(x \in U\), if \(\xi\) is a vector field of \(U\) then 
\(\xi(x) = (x, v(x))\) where \(v(x) \in T_x U\).

We may extend this idea to general manifolds.

\begin{definition}[Tangent Bundle]
  Let \(X\) be a manifold. We define the tangent bundle \(TX\) of \(X\) as 
  \[TX := \bigcup_{x \in U} T_x X.\]
  We note that unlike the definition in \(\mathbb{R}^n\), this union is 
  disjoint as individual tangent vectors lives in different tangent spaces.
  Furthermore, we may not express the tangent bundle as a product without 
  choosing a chart. 
\end{definition}

Similar to the projection map in \(\mathbb{R}^n\), there is induced map 
from the tangent bundle \(\pi : TX \to X : v \mapsto x\) for all \(v \in T_x X\).
As \(v\) is uniquely identified by the tangent space it lives in, this function 
is well-defined.

\begin{proposition}
  Let \(X\) be a \(n\)-dimensional manifold. Then \(TX\) is a \(2n\)-dimensional 
  manifold and the projection \(\pi : TX \to X\) is smooth.
\end{proposition}
\begin{proof}
  We will first define a topology on \(TX\) by defining a topology on individual 
  charts. 
  
  Given \((U, f)\) a chart on \(X\), 
  let \(TU := \pi^{-1}(U) = \bigcup_{x \in U} T_x X\). Recall that, for all 
  \(x \in U\), we have the linear isomorphism 
  \(\Delta_f : T_x X \to \mathbb{R}^n\), and thus, we may construct the bijection 
  \[F_U : TU = \bigcup_{x \in U} T_x X \to f(U) \times \mathbb{R}^n 
    : v \in T_x X \mapsto (f(x), \Delta_f(v)).\]
  It is easy to check that this is a bijection. We see that \(F_U\) is 
  injective as \(f\) is an homeomorphism, and for all 
  \((f(x), w) \in f(U) \times \mathbb{R}^n\), as 
  \(\Delta_f : T_x X \to \mathbb{R}^n\) is a linear isomorphism, there exists 
  some \(v \in T_x X\) such that \(\Delta_f(v) = w\) and so, 
  \(F_U(v) = (f(x), w)\) as required.
  With this, \(F_U\) induces a topology on \(TU\) be defining \(W \subseteq TU\) 
  is open if \(F_U(W)\) is open in \(f(U) \times \mathbb{R}^n\).

  Now, consider an atlas \(\mathcal{A} = \{(U_i, f_i)\}_{i \in \mathcal{I}}\) 
  on \(X\). Through the above procedure, we may define a topology for 
  each \(TU_i = \pi^{-1}(U_i)\). Then, as \(\bigcup_{i \in I} TU_i = TX\) 
  (note that this union is not necessary disjoint as \(U_i\) might not be), 
  we may define the topology on \(TX\) where a \(W \subseteq TX\) is open if 
  \(U \cap TU_i\) is open for all \(i \in \mathcal{I}\).

  It is easy to see that this procedure produces a Hausdorff and second 
  countable topology (exercise). 

  Now to see that \(TX\) is a topological manifold we will need to construct 
  an atlas on \(TX\). This is clear as for each \(T_x X \in TX\), there exists 
  some chart \((U, f)\) on \(X\) containing \(x\). Then, by construction 
  \[F_U : TU \to f(U) \times \mathbb{R}^n \subseteq 
    \mathbb{R}^n \times \mathbb{R}^n \simeq \mathbb{R}^{2n}\]
  is a homeomorphism, \((TU, F_U)\) is a valid chart on \(TX\) containing \(x\).

  Finally, to show that \(TX\) is a smooth manifold, it suffices to show 
  that the transition functions from the above lattice are smooth. But this is 
  clear since by construction
  \[(F_{U_i} \circ F_{U_j}^{-1})(x, v) = ((f_{U_i} \circ f_{U_j}^{-1})(x), 
    (\Delta_{f_i} \circ \Delta_{f_j}^{-1})(v)) = (\phi_{ij}(x), 
    D \phi_{ij}\mid_{x}(v)).\]
  Thus, the transition function is smooth as its components are smooth.

  To see that \(\pi : TX \to X\) is a smooth function, let \(w \in TX\) so 
  there exists some \(i\) such that \(w \in TU_i\), then we will show
  \[\tilde \pi := f_i \circ \pi \circ F_{U_i}^{-1} : F_{U_i}(TU_i) \to f_i(U_i)\]
  is smooth at \(F_{U_i}(w)\) with appropriately chosen charts. But since 
  \(\tilde \pi : f_i(U_i) \times \mathbb{R}^n \to f_i(U_i)\) is simply the 
  projection function, it is smooth, and hence \(\pi\) is smooth.
\end{proof}

\begin{proposition}
  The projection \(\pi : TX \to X\) is a submersion.
\end{proposition}
\begin{proof}
  Define \(\tilde \pi\) as above. But this is simply a projection function from 
  \(\mathbb{R}^{2n} \to \mathbb{R}^n\) and thus, has rank \(n\).
\end{proof}

\begin{definition}[Vector Field]
  Let \(X\) be a manifold. A vector field on \(X\) is a smooth function 
  \(\xi : X \to TX\) such that \(\pi \circ \xi = \text{id}_X\).

  In particular, we see that \(\xi(x) \in T_x X\) for all \(x \in X\).
\end{definition}

\begin{lemma}
  Let \(X\) be a manifold and let \(\xi : X \to TX\) be a function such that 
  \(\pi \circ \xi = \text{id}_X\). Then \(\xi\) is a vector field if and only 
  if for every chart \((U, f)\) on \(X\), we have 
  \[F_U \circ \xi\mid_U \circ f^{-1} : f(U) \to f(U) \times \mathbb{R}^n\]
  is smooth (where \(F_U\) is the bijection between 
  \(TU = \bigcup_{x \in U} T_x X\) and \(f(U) \times \mathbb{R}^n\)).
\end{lemma}
\begin{proof}
  By the definition of smooth functions (only need to check 
  \(\xi(U) \subseteq TU\) so that \((TU, F_U)\) is a chart at \(\xi(x)\)). 
\end{proof}

\begin{proposition}
  Let \(X\) be an \(n\)-dimensional manifold and let \(Z \subseteq X\) be a 
  submanifold of \(X\) with the inclusion map \(\iota : Z \hookrightarrow X\).
  Then the image of \(Di : TZ \to TX\) is a submanifold of \(TX\). 
\end{proposition}
\begin{proof}
  Denote \(\pi_Z : TZ \to Z\) and \(\pi_X : TX \to X\) for the respective projective 
  maps. Let \(w \in TZ\) and \(z = \pi_Z(w)\). Since \(Z\) is a submanifold, 
  there exists a chart \((U, f)\) on \(X\) containing \(z\) such that 
  \[f(U \cap Z) = f(U) \cap A\]
  for some affine subspace \(A \subseteq \mathbb{R}^n\). Then, it follows 
  \[F_U(TU \cap Di(TZ)) = F_U(TU) \cap (A \times A)\]
  where \(A \times A\) is a affine subspace of \(\mathbb{R}^{2n}\).
\end{proof}

\begin{lemma}
  Let \(X\) be a manifold and \(Z\) is a submanifold of \(X\). If \(\xi\) is a 
  vector field on \(X\) such that \(\xi(z) \in T_z Z\) for all \(z \in Z\), then 
  \(\xi\mid_Z\) is a vector field on \(Z\).
\end{lemma}
\begin{proof}
  As the inclusion map \(\iota : Z \hookrightarrow X\) is smooth, so is 
  \(\xi\mid_Z = \xi \circ \iota\). By assumption, \(\xi\mid_Z(z) \in TZ\) for 
  all \(z \in Z\), and thus the induced morphism \(\xi\mid_Z : Z \to TZ\) 
  is also smooth. Finally, as \(\pi_Z \circ \xi\mid_Z = \text{id}_X\mid_Z 
  = \text{id}_Z\), we have \(\xi\mid_Z\) is a vector field on \(Z\).
\end{proof}

\begin{theorem}[Hairy Ball Theorem]
  Any vector field on \(S^2\) is zero at some point.
\end{theorem}
\begin{proof}
  Requires algebraic topology or differential topology.
\end{proof}

\begin{definition}[Flow]
  Let \(X\) be a manifold. A one-parameter family of diffeomorphisms or 
  flow on \(X\) is a smooth function 
  \[F : (-\epsilon, \epsilon) \times X \to X\]
  for some \(\epsilon > 0\), such that 
  \begin{itemize}
    \item for all \(s \in (-\epsilon, \epsilon)\), the function 
      \[F_s : X \to X : x \mapsto F(s, x)\]
      is a diffeomorphism,
    \item \(F_0 = \text{id}\),
    \item \(F_t \circ F_s = F_{s + t}\) for all \(t, s \in (-\epsilon, \epsilon)\) 
      and \(s + t \in (-\epsilon, \epsilon)\).
  \end{itemize}
\end{definition}

Let \(X\) be a manifold and let \(F : (-\epsilon, \epsilon) \times X \to X\) 
be a flow on \(X\). Then instead of fixing \(s \in (-\epsilon, \epsilon)\), 
fixing \(x \in X\), we obtain a smooth function 
\[\sigma_x : (-\epsilon, \epsilon) \to X : t \mapsto F(t, x).\]
Straight away, we observe, as \(F_0 = \text{id}\), we have 
\[\sigma_x(0) = F_0(x) = x,\]
and so \(\sigma_x\) is a curve through \(x\). By recalling that the tangent 
space at \(x\) is defined to be the set of equivalent classes of the curves 
through \(x\), this provides a function 
\[\xi^F : X \to TX : x \mapsto [\sigma_x].\]
This is a vector field on \(X\) and is known as the infinitesimal version of 
the flow \(F\).

\begin{proposition}
  Let \(X\) be a compact manifold and let \(\xi\) be a vector field on \(X\). 
  Then for any \(x \in X\), there exists an open subset \(U \subseteq X\) 
  containing \(x\) and a flow 
  \[F : (-\epsilon, \epsilon) \times U \to X,\]
  such that \(\xi\mid_U\) is the infinitesimal version of \(F\), i.e. 
  \(\xi\mid_U = \xi^F\). That is to say, any vector field is locally a 
  flow.
\end{proposition}
\begin{proof}
  The proof of this proposition requires results from PDEs.
\end{proof}

Let \(X\) be an \(n\)-dimensional manifold and let 
\(F : (-\epsilon, \epsilon) \times X \to X\) be a flow on \(X\). Let 
\((U, f)\) be a chart on \(X\) such that for all \(s \in (-\epsilon, \epsilon)\),
we have \(F_s(U) \subseteq U\). Then we may define the smooth function
\[\tilde F : (-\epsilon, \epsilon) \times f(U) \to f(U) :
 (t, y) \mapsto (f \circ F_t \circ f^{-1})(y).\]
Since \(f(U) \subseteq \mathbb{R}^n\), we may write 
\[\tilde F = (\tilde F_i)_{i = 1}^n, 
  \tilde F_i : (-\epsilon, \epsilon) \times f(U) \to \mathbb{R}.\]
Then the infinitesimal version of \(f(U)\) is 
\(\tilde \xi^F = \pdv{\tilde F}{s}\mid_0\). Thus, 
\[\xi^F = \Delta_f^{-1} \circ \tilde \xi^F \circ f : U \to TU,\]
is the corresponding vector field on \(U\).

\subsection{Cotangent Space}

\begin{definition}[Cotangent Space]
  Let \(X\) be a manifold and let \(x \in X\) and define 
  \[R_x(X) := \{h : X \to \mathbb{R} \mid \text{rk}(h)\mid_x = 0\} \le C^\infty(X),\]
  where \(C^\infty(X)\) is the space of smooth maps between \(X\) and 
  \(\mathbb{R}\). Then the cotangent space is the quotient 
  \[T^*_x(X) = C^\infty(X) / R_x(X).\]
\end{definition}

The cotangent space can be thought of as the dual space of the tangent space, 
and hence the notation. As one might expect, the dimension of a cotangent space 
equals the dimension of the tangent space and hence, the dimension of the 
manifold. As with before, we will first prove this for \(\mathbb{R}^n\).

\begin{lemma}
  Let \(U \subseteq \mathbb{R}^n\) be open and let \(x \in U\). Then 
  \(\dim T^*_x X = n\).
\end{lemma}
\begin{proof}
  Define the map 
  \[\nabla_x : C^\infty(U) \to \mathbb{R}^n : h \mapsto Dh\mid_x.\]
  Clearly \(\nabla_x\) is linear and \(\ker \nabla_x = R_x(U)\).
  Then, by the first isomorphism, we have \(T^*_x U \cong \text{Im}(\nabla_x)\) 
  and it suffices to show \(\nabla_x\) is surjective. But this is clear as 
  for all \(v := (v_1, \cdots, v_n) \in \mathbb{R}^n\), defining \(h(w) := v \cdot w\), 
  we have \(\nabla_x h = v\) and so \(\nabla_x\) is surjective. 
\end{proof}

Now to extend this idea to general manifolds, we quickly realise we will 
need to be able to extend a smooth function defined on a subset to the 
whole space. We will achieve this with the bump function.

Let 
\[\phi : \mathbb{R} \to \mathbb{R} : x \mapsto 
  \begin{cases}
  e^{- 1 / x}, \ x > 0\\
  0, \ x \le 0.
\end{cases}\]
It is not difficult to show that \(\phi\) is smooth and \(\phi^(k)(0) = 0\) 
for all \(k \ge 0\). Now, define 
\[\psi(x) := \frac{\phi(x)}{\phi(x) - \phi(1 - x)},\]
as \(\phi(x) - \phi(1 - x) > 0\) for all \(x \in \mathbb{R}\), we see that 
\(\psi\) is also a smooth function such that \(\psi(x) = 0\) for \(x \le 0\) 
and \(\psi(x) = 1\) for \(x \ge 1\). Now, for real numbers \(0 < r < r'\), 
we define 
\[\tilde \psi : \mathbb{R}^n \to \mathbb{R} : x \mapsto 
  \psi\left(\frac{|x| - r'}{r - r'}\right).\]
One can show that \(\tilde \psi\) is smooth and for \(x \not\in B_{r'}(0)\) 
\(\tilde \psi(x) = 0\) and for \(x \in B_{r}(1)\), \(\tilde \psi(x) = 1\). 
This function is known as the bump function for \(\mathbb{R}^n\). 

This idea can be generalized to general manifolds. Let \(X\) be a manifold and 
let \(x \in X\) and suppose that \((U, f)\) is a chart on \(X\) containing 
\(x\) such that \(f(x) = 0\). Now, as \(f(U)\) is open, there exists some 
\(r' > 0\), such that \(\overline{B_{r'}(0)} \subseteq f(U)\). Taking 
\(0 < r < r'\), we define 
\[\rho : X \to \mathbb{R} : y \mapsto 
  \begin{cases}
    (\tilde \psi \circ f)(y), \ y \in U,\\
    0, \ y \not\in U.
  \end{cases}\]
It is clear that \(\rho\) is smooth and \(\rho(y) = 0\) for all 
\(y \not\in U\) and \(\rho(y) = 1\) for all \(y \in f^{-1}(B_r(0))\).
We call this function a bump function with respect to the chart \((U, f)\).

\begin{proposition}
  Let \(X\) be an \(n\)-dimensional manifold and let \(x \in X\). Then 
  \(\dim T^*_x X = n\).
\end{proposition}
\begin{proof}
  Let \((U, f)\) be a chart on \(X\) containing \(x\) and \(f(x) = 0\). 
  Then for all \(h \in C^\infty(X)\), define 
  \(\tilde h := h \circ f^{-1} : f(U) \to \mathbb{R}\).
  Then \(h \in R_x(X)\) if and only if the rank of \(\tilde h\) is zero at 
  \(f(x)\), in particular, \(h \in \ker \nabla_{f, x}\) where 
  \[\nabla_{f, x} : C^\infty(X) \to \mathbb{R} : h \mapsto D\tilde h\mid_{f(x)}.\]
  Again, by the first isomorphism theorem, 
  \(T^*_x X \cong \text{Im}(\nabla_{f, x})\) and again, it suffices to show 
  \(\nabla_{f, x}\) is surjective. However, this is a bit tricky since 
  we now require a smooth function on \(C^\infty(X)\) rather than 
  \(C^\infty(U)\) and so, we will use the bump function.

  For all \(v := (v_1, \cdots, v_n)\), define \(\tilde h(w) := v \cdot w\) so 
  that \(\nabla_0 \tilde h = v\). Now, define 
  \[h : X \to \mathbb{R} : y \mapsto \begin{cases}
    \rho(\tilde h(f(y))), \ y \in U,\\
    0, \ y \not\in U,
  \end{cases}\]
  we see that for some open \(W \subseteq U\), \(x \in W\), 
  \(\tilde h\mid_W = (h \circ f^{-1})\mid_W\) and so 
  \[\nabla_{f, x}(h) = D\tilde h\mid_{f(v)} = v,\]
  and \(\nabla_{f, x}\) is surjective as required.
\end{proof}

For all \(h \in C^\infty(X)\), we denote \(dh\mid_x := [h] \in T^*_x X\).

Suppose \(h \in C^\infty(X)\), \(x \in X\) and \((U, f), (U', f')\) are 
two charts on \(X\) containing \(x\). Then 
\(\nabla_f(dh\mid_x) = D\tilde h\mid_{f(x)}\) where 
\(\tilde h = h \circ f^{-1}\) and \(\nabla_{f'}(dh\mid_x) = 
D\tilde {h'}\mid_{f'(x)}\) where \(\tilde {h'} = h \cdot f'^{-1}\). Thus, 
\[\tilde {h'} = \tilde h \circ f \circ f'{-1} = \tilde h \circ \phi^{-1},\]
where \(\phi\) is the transition map between \(f\) and \(f'\). Then, 
\[\nabla_{f'}(dh\mid_x) = D(\tilde h \circ \phi^{-1})\mid_{f'(x)} = 
  D\tilde h\mid_{f(x)} \circ D \phi^{-1}\mid_{f'(x)} 
  = \nabla_f(dh\mid_x) \circ D\phi^{-1}\mid_{f'(x)}.\]

As mentioned previously, we may think about the cotangent space as the dual 
of the tangent space. This notion can be made rigorous with the following.

Let \(U \subseteq \mathbb{R}^n\) be an open set at let \(x \in U\). Then for 
\(v \in T_x U \simeq \mathbb{R}^n\), we may write \(v = (v_1, \cdots, v_n)\) 
and so, we may define the partial derivative at \(x\) in the direction 
of \(v\) as the linear map 
\[\partial_{x, v} : C^\infty(U) \to \mathbb{R} : h \mapsto Dh\mid_x(v).\]
Then, for all \(h \in R_x(U)\), \(\partial_{x, v}(h) = 0\), and so 
\(R_x(X) \subseteq \ker \partial_{x, v}\) and the map \(\partial_{x, v}\) induces 
a injection from \(T^*_x U\) to \(\mathbb{R}\). As \(\partial_{x, v}\) is linear 
\(\partial_{x, v} \in (T^*_x U)^* =: \text{Hom}(T^*_x U, \mathbb{R})\). Thus, 
we have a linear map 
\[T_x U \to (T^*_x U)^* : v \mapsto \partial_{x, v},\]
and we will show this is an isomorphism. 

Suppose \(v \in T_x X\) such that \(\partial_{x, v} = 0\). Then, taking 
\(h(y) := v \cdot y\), we have \(0 = \partial_{x, v}(h) = v \cdot v\) implying 
\(v = 0\) and so, the map is injective. On the other hand, as 
\(\dim (T^*_x U)^* = \dim T^*_x U = \dim T_x U\), the map is indeed an 
isomorphism. Thus, in some sense, the tangent space is canonically isomorphic 
to the dual of the cotangent space. Hence, we have a canonical isomorphism 
\[(T_x U)^* \simeq ((T^*_x U)^*)^* \simeq T^*_x U.\]

Now, suppose \(X\) is an \(n\)-dimensional manifold and \(x \in X\). Then, 
for any \(v = [\sigma] \in T_x X\), we define 
\[\partial_{x, v} : C^\infty(X) \to \mathbb{R} : 
  h \mapsto \dv{(h \circ \sigma)}{t}\Big\vert_0.\]
Then given a chart \((U, f)\) on \(X\) containing \(x\), we have a curve 
\[\tilde \sigma := f \circ \sigma : (-\epsilon, \epsilon) \to f(U) 
  \subseteq \mathbb{R}^n.\]
In particular, we may write \(\tilde \sigma = 
(\tilde \sigma_1, \cdots, \tilde \sigma_n)\). Then, \(h \circ \sigma = \tilde h 
\circ \tilde \sigma\) where \(\tilde h = h \circ f^{-1} \in C^\infty(f(U))\).
Thus, we have
\[\dv{(h \circ \sigma)}{t}\Big\vert_0 = \dv{(\tilde h \circ \tilde \sigma)}{t}\Big\vert_0 
  = D \tilde h\mid_{f(x)} \circ D\tilde \sigma\mid_0 = 
  \sum_{i = 1}^n \pdv{\tilde h}{x_i}\Big\vert_{f(x)} \dv{\tilde \sigma_i}{t}\Big\vert_0
  = \nabla_f(dh\mid_x)^T \cdot \Delta_f([\sigma]).\]
Now, by considering if \(h \in R_x(X)\) then \(\partial_{x, v}(h) = 
\dv{(h \circ \sigma)}{t}\big\vert_0 = 0\), we have 
\(R_x(X) \subseteq \ker \partial_{x, v}\) and so, we obtain a map 
\[T_x X \to (T^*_x X)^* : v \mapsto \partial_{x, v}.\]

\begin{proposition}
  Let \(X\) be an \(n\)-dimensional manifold and let \(x \in X\). Then the 
  map 
  \[T_x X \to (T^*_x X)^* : v \mapsto \partial_{x, v}\]
  is an isomorphism of vector spaces.
\end{proposition}
\begin{proof}
  Let \((U, f)\) be a chart on \(X\) containing \(x\) and recall that 
  \[\Delta_f : T_x \to \mathbb{R}^n, \ \nabla_f : T^*_x X \to \mathbb{R}^n\]
  and both isomorphisms of vector spaces. Let \(\sigma : (-\epsilon, \epsilon) 
  \to X\) be a curve through \(x\) and let \(h \in C^\infty(X)\). Then 
  as we have shown above, defining \(v = [\sigma]\), we have
  \[\partial_{x, v}(dh\mid_x) = \nabla_f(dh\mid_x)^T \cdot \Delta_f(v).\]
  In particular, the map 
  \[ (\nabla_f)^* \circ (v \mapsto \partial_{x, v}) \circ \Delta_f^{-1}:
    \mathbb{R}^m \to (\mathbb{R}^n)^* : w \mapsto v = [\sigma] \mapsto 
    \partial_{x, v} \mapsto \tilde \partial_{x, v}\]
  maps any vector \(w\) to the linear functional \(u \mapsto u \cdot w\). 
  Thus, similar to the Euclidean case, the map is an isomorphism.
\end{proof}

With this, a similar conclusion can be made by taking the dual on both 
sides of the isomorphism, obtaining the canonical isomorphism
\[(T_x X)^* \simeq ((T^*_x X)^*)^* \simeq T^*_x X.\]

\subsection{Derivation}

So far, we have defined the cotangent space and showed the existence of an 
isomorphism between \(T_x X\) and \((T_x^* X)^*\) via \(v \mapsto \partial_{x, v}\).
We will again treat this topic but this time through an algebraic point of view 
with derivations.

\begin{definition}[Derivation]
  Let \(X\) be an \(n\)-dimensional manifold and let \(x \in X\). A derivation 
  of \(X\) at \(x\) is a linear map \(\mathfrak{d} : C^\infty(X) \to \mathbb{R}\) 
  such that 
  \[\mathfrak{d}(h_1 h_2) = h_1(x)\mathfrak{d}(h_2) + h_2(x)\mathfrak{d}(h_1).\]
  We call this property the Leibniz rule and note the similarity of the statement 
  with the Leibniz rule (or product rule) from calculus. We denote 
  \[\text{Der}_x(X) := \{\text{derivations of } X \text{ at } x\}.\]
\end{definition}

We note that the definition of the Leibniz rule depends on the choice of \(x\) 
though later, we shall remove this dependence.

\begin{theorem}\label{thm_der}
  Let \(X\) be a manifold and let \(x \in X\). A linear map \(\mathfrak{d} : 
  C^\infty \to \mathbb{R}\) is a derivation of \(X\) at \(x\) if and only if 
  \(\mathfrak{d}(h) = 0\) for all \(h \in R_x(X) = 
  \{h \in C^\infty \mid \text{rk}(h)\mid_x = 0\}\).
\end{theorem}
\begin{proof}[Proof of the reverse direction of theorem \ref{thm_der}]
  The forward direction requires some further definitions so let us prove the 
  reverse direction first. 

  Suppose \(\mathfrak{d}\) satisfies \(\mathfrak{d}(h) = 0\) for all 
  \(h \in R_x(X)\). Let \(h_1, h_2 \in C^\infty(X)\) and define 
  \[h(y) := h_1(y)h_2(y) - h_1(x)h_2(y) - h_2(x)h_1(y).\]
  We see that (as the Jacobian satisfies the Leibniz rule), 
  \[Dh\mid_x = h_1(x)Dh_2\mid_x + h_2(x) Dh_1\mid_x - 
  h_1(x)Dh_2\mid_x - h_2(x) Dh_1\mid_x = 0\]
  and so \(h \in R_x(X)\). By assumption, \(\mathfrak{d}(h) = 0\) and by 
  linearity of \(\mathfrak{d}\), 
  \[0 = \mathfrak{d}(h) = \mathfrak{d}(h_1h_2) - h_1(x)\mathfrak{d}(h_2) - 
    h_2(x)\mathfrak{d}(h_1)\]
  implying 
  \[\mathfrak{d}(h_1 h_2) = h_1(x)\mathfrak{d}(h_2) + h_2(x)\mathfrak{d}(h_1)\]
  as required.
\end{proof}

As with other manifold proofs, we will first consider the statement in 
\(\mathbb{R}^n\) and then generalize.

\begin{lemma}\label{der_r}
  Let \(U \subseteq \mathbb{R}^n\) be an open subset and let \(x \in U\) and 
  \(\mathfrak{d}\) be a derivation as \(x\). Then for all \(h \in R_x(X)\), 
  \(\mathfrak{d}(h) = 0\).
\end{lemma}
\begin{proof}
  Consider the constant function \(1\). By Leibniz rule, we have 
  \[\mathfrak{d}(1) = \mathfrak{d}(1 \cdot 1) = \mathfrak{d}(1) + \mathfrak{d}(1) = 
    2\mathfrak{d}(1)\]
  implying \(\mathfrak{d}(1) = 0\). Now, since \(\mathfrak{d}\) is linear, 
  it follows \(\mathfrak{d}(c) = 0\) for all \(c \in \mathbb{R}\). Now, let 
  \(h \in R_x(U)\), then Taylor's theorem implies 
  \[h(y) = h(x) + \sum_{i = 1}^n(y_i - x_i)G_i(y),\]
  for some \(G_i \in C^\infty(X)\). Furthermore, by the choice of \(h\), 
  \(G_i(x) = 0\) for all \(i = 1, \cdots, n\). Thus, 
  \[\mathfrak{d}(h) = \mathfrak{d}(h(x)) + 
    \sum_{i = 1}^n \mathfrak{d}((y_i - x_i)G_i(y))
    = \sum_{i = 1}^n (x_i - x_i) \mathfrak{d}(G_i(y)) + G_i(x) 
      \mathfrak{d}(y_i - x_i) = 0\]
  as required.
\end{proof}

\begin{lemma}
  Let \(X\) be a manifold, let \(x \in X\) and \(\mathfrak{d}\) be a derivation 
  at \(x\). Furthermore, let \(U\) be an open neighbourhood of \(x\) in \(X\), 
  \(h \in C^\infty(X)\) be a smooth function such that \(h(y) = 0\) for all 
  \(y \in U\). Then \(\mathfrak{d}(h) = 0\).
\end{lemma}
\begin{proof}
  With the bump function, we showed the existence of a function 
  \(\rho \in C^\infty(X)\) such that there exist open sets, 
  \[x \in V \subseteq W \subseteq U\]
  so, \(\rho\mid_V = 1\) and \(\rho\mid_{X \setminus W} = 0\). Define 
  \(\psi = 1 - \rho\) so that we have \(\psi \cdot h = h\). Then, by the 
  Leibniz rule, we have 
  \[\mathfrak{d}(h) = \mathfrak{d}(\psi \cdot h) = h(x)\mathfrak{d}(\psi) + 
    \psi(x)\mathfrak{d}(h) = 0\]
  since \(h(x) = \psi(x) = 0\).
\end{proof}

\begin{definition}[Germ]
  Let \(X\) be a manifold and let \(x \in X\). Then denote 
  \(W \subseteq C^\infty(X)\) the set
  \[W := \{h \in C^\infty(X) \mid \exists \text{ open } U \subseteq X, x \in U
    \wedge h\mid_U = 0\}.\]
  it is not difficult to show that \(W\) is a linear subspace of \(C^\infty(X)\) 
  and so, we define the germ to be the quotient
  \[\widehat{C_x^\infty}(X) := C^\infty(X) / W.\]
  Elements of this space are called germs of smooth functions of \(X\) at 
  \(x\) and we see that two smooth functionals in \(C^\infty(X)\) are the 
  same germ if their difference is locally zero around \(x\).
\end{definition}

We see that the evaluation map \(\text{ev}_x : \widehat{C_x^\infty}(X) \to 
\mathbb{R} : [h] \mapsto h(x)\) is well-defined. Moreover, the above lemma 
implies that, for all \(\mathfrak{d} \in \text{Der}_x(X)\), the induced linear map 
\[\hat{\mathfrak{d}} : \widehat{C_x^\infty}(X) \to \mathbb{R}\]
is well-defined (since \(W \le \ker \mathfrak{d}\)) and it satisfies the 
Leibniz rule 
\[\hat{\mathfrak{d}}([h_1 \cdot h_2]) = h_1(x)\hat{\mathfrak{d}}([h_2]) 
+ h_2(x)\hat{\mathfrak{d}}([h_1]).\]

\begin{lemma}
  Let \(X\) be a manifold and let \(x \in X\) and \(U \subseteq X\) be an 
  open subset containing \(x\). Then, we have an linear isomorphism 
  \[\widehat{C_x^\infty}(X) \tilde \to \widehat{C_x^\infty}(U) : [h] \mapsto [h\mid_U].\]
\end{lemma}
\begin{proof}
  The map is well-defined as the intersection of two open sets is open. 
  As the map is clearly linear and injective, it remains to show surjectivity.
  With the bump function, there exists some \(\rho \in C^\infty(X)\) and open 
  sets 
  \[x \in V \subseteq W \subseteq U\] 
  such that \(\rho\mid_V = 1\) and \(\rho\mid_{X \setminus W} = 0\). Then, for 
  all \([h] \in \widehat{C_x^\infty}(U)\), define 
  \[\tilde h(x) := \begin{cases}
    \rho(x)h(x), \ &x \in U,\\
    0, \ &x \not \in U.
  \end{cases}\]
  It is clear that \(\tilde h\) is smooth and, furthermore, 
  \(\tilde h \mid_U \in [h]\) since \(h - \tilde h\) is zero on \(V\). Thus,
  \([\tilde h] = [h]\) and the map is surjective as claimed. 
\end{proof}

\begin{lemma}
  Let \(X\) be a manifold and let \(x \in X\) and \(U \subseteq X\) be an 
  open subset containing \(x\). Then, we have a linear isomorphism 
  \[\text{Der}_x(U) \tilde \to \text{Der}_x(X) : \mathfrak{d}' \mapsto 
    \mathfrak{d}\]
  where \(\mathfrak{d}(h) := \mathfrak{d}'(h\mid_U)\).
\end{lemma}
\begin{proof}
  As we have seen, a derivation \(\mathfrak{d}'\) on \(U\) induces a map 
  \(\hat{\mathfrak{d}}' : \widehat{C_x^\infty}(U) \to \mathbb{R}\) which 
  satisfy the Leibniz rule. Then, by the above lemma, we have the 
  isomorphism \(\phi : \widehat{C_x^\infty}(X) \cong \widehat{C_x^\infty}(U)\).
  Thus, we may define 
  \[\hat{\mathfrak{d}} := \hat{\mathfrak{d}}' \circ \phi : 
    \widehat{C_x^\infty}(X) \to \widehat{C_x^\infty}(U) \to \mathbb{R}.\] 
  Hence, taking \(\mathfrak{d} := \hat{\mathfrak{d}} \circ q\) where \(q\) 
  is quotient map suffices. These steps can be reversed and thus, this map 
  is an isomorphism.
\end{proof}

Finally, we may prove the forward direction of theorem \ref{thm_der}.

\begin{proof}[Proof of the forward direction of theorem \ref{thm_der}]
  Suppose \(\mathfrak{d} : C^\infty(X) \to \mathbb{R}\) is a derivation at \(x\) 
  and we will show that \(\mathfrak{d}(h) = 0\) for all \(h \in R_x(X)\). 
  
  Let \(h \in R_x(X)\) and suppose \((U, f)\) is a chart on \(X\) containing 
  \(x\). By the above lemma, there exists some derivation 
  \(\mathfrak{d}' \in \text{Der}_x(U)\) such that \(\mathfrak{d}(h) = 
  \mathfrak{d}'(h\mid_U)\). Now, as \(f\) is a homeomorphism between 
  \(U\) and \(f(U)\), by composing with \(f\), we have the isomorphisms 
  \[C^\infty(U) \tilde \to C^\infty(f(U)) \text{ and } 
    \text{Der}_x(U) \tilde \to \text{Der}_{f(x)}(f(U)).\]
  Then, taking \(\tilde h := h \circ f^{-1}\), we have the rank of \(\tilde h\) 
  at \(f(x)\) is 0 and thus, by lemma \ref{der_r}, the claim follows.
\end{proof}

With theorem \ref{thm_der}, the canonical isomorphism between 
\(T_x X\) and \((T_x^* X)^*\) becomes an isomorphism between \(T_x X\) and 
\(\text{Der}_x(X)\), and thus, this gives another definition of the 
tangent space of a manifold at a point.

\subsubsection{Derivation and Vector Fields}

Let \(U \subseteq \mathbb{R}^n\) be an open set and let \(\xi : U \to TU\) be 
a vector field. Since \(TU = U \times \mathbb{R}^n\), \(\xi\) induces a smooth 
map \(\tilde \xi : U \to \mathbb{R}^n := \pi_2 \circ \xi\). Then, for all 
\(x \in U\), we have a derivation along the direction \(\tilde \xi(x)\) with 
\[\partial_{x, \tilde \xi(x)} : C^\infty(U) \to \mathbb{R}.\]
Thus, for all \(h \in C^\infty(X)\), we have 
\[\tilde \xi(h) : U \to \mathbb{R} : x \mapsto \partial_{x, \tilde \xi(x)}(h).\]
If we write \(\tilde \xi\) in coordinates so that \(\tilde \xi(x) = 
(\tilde \xi_1(x), \cdots, \tilde \xi_n(x))\). Then, 
\[\tilde \xi(h) = \partial_{x, \tilde \xi(x)}(h) = 
  \tilde \xi_1 \pdv{h}{x_1} + \cdots + \tilde \xi_n \pdv{h}{x_n}.\]
For \(h_1, h_2 \in C^\infty(U)\), we see that the Leibniz rule apply, i.e. 
\[\tilde \xi(h_1, h_2) = h_1 \tilde \xi(h_2) + h_2 \tilde \xi(h_1),\]
and for this reason, we call \(\xi\) a derivation on \(X\).

Now, let \(\xi : X \to TX\) be a vector field on the \(n\)-dimensional manifold 
\(X\). Similarly, for any \(x \in X\), we have an element in \(\text{Der}_x(X)\) 
given by the linear map 
\[\partial_{x, \xi(x)} : C^\infty(X) \to \mathbb{R}.\]
Thus, defining \(\xi\) such that for all \(h \in C^\infty(X)\), 
\[\xi(h) = x \mapsto \partial_{x, \xi(x)}(h).\]
We will show \(\xi(h)\) is smooth. Let \(x \in X\) and take \((U, f)\) be a chart 
on \(X\) containing \(x\) and let \(v := \Delta_f(\xi(x))\) and 
\(h := h \circ f^{-1}\). Then, as we have already show, 
\[\partial_{x, \xi(x)}(h) = \partial_{f(x), v}(\tilde h) = \nabla_f (dh\mid_x)^T \cdot v.\]
Then, let \(\tilde \xi\) be the corresponding function from \(f(U)\) to \(\mathbb{R}^n\) 
corresponding to \(\xi\), i.e. \(\tilde\xi(y) := \Delta_f(\xi\mid_{f^{-1}(y)})\). 
Then, \(\xi(h) \circ f^{-1} \tilde \xi(\tilde h)\) is smooth on \(f(U)\) since 
\(f(U)\) is an open subset of \(\mathbb{R}^n\). Thus, \(\xi(h)\) is smooth 
implying \(\xi(h) \in C^\infty(X)\).

With this, we see that \(\xi\) is a linear mapping from \(C^\infty(X)\) to itself, 
and so, it is a derivation.

\begin{definition}[Derivation]
  Let \(X\) be a manifold. A derivation is a linear map 
  \[\mathfrak{D} : C^\infty(X) \to C^\infty(X)\]
  which satisfies the Leibniz rule 
  \[\mathfrak{D}(h_1h_2) = h_1 \mathfrak{D}(h_2) + h_2 \mathfrak{D}(h_1),\]
  for all \(h_1, h_2 \in C^\infty(X)\).

  We denote the set of all derivations on \(X\) by \(\text{Der}(X)\).
\end{definition}

We note that our previous definition of the derivation depended on the choice 
of \(x\) which is definition is independent of that choice.

We have so far seen that a vector field induces a derivation. We shall show 
the reverse is also true.

\begin{definition}
  Let \(X\) be an \(n\)-dimensional manifold. Then, any derivation 
  \(\mathfrak{D}\) on \(X\) defines a vector field on \(X\).
\end{definition}
\begin{proof}
  Let \(x \in X\), we have the linear map 
  \[\mathfrak{D}\mid_x : C^\infty(X) \to \mathbb{R} : h \mapsto \mathfrak{D}(h)(x).\]
  The Leibniz rule implies that \(\mathfrak{D}\mid_x \in \text{Der}_x(X)\). 
  However, we know that \(\text{Der}_x(X) \cong T_xX\) and so, we obtain a 
  map 
  \[\xi : X \to TX : x \mapsto \mathfrak{D}\mid_x.\]
  It remains to show that \(\xi\) is smooth. Let \((U, f)\) be a chart on 
  \(X\) containing \(x\). Then \(\xi\) induced a map 
  \[\tilde \xi : f(U) \to f(U) \times \mathbb{R}^n\]
  where the second component of \(\tilde \xi = \Delta_f \circ \xi \circ f^{-1}\).
  Write \(\tilde \xi = \sum_{i = 1}^n \tilde \xi_i \pdv{x_i}\) and we will 
  show \(\xi_i\) is smooth for all \(i = 1, \cdots, n\). Recall that, using 
  the bump function, there exists a smooth function \(\psi\) and open sets 
  \[f(x) \in W \subseteq V \subseteq f(U)\]
  with \(\psi\mid_W = 1\) and \(\psi\mid_{X / V} = 0\). Then, defining 
  \[\chi(x) := \begin{cases}
    ((x_i\psi) \circ f)(x), \ & x \in U,\\
    0, & x \not\in U.
  \end{cases}\]
  In particular, \(\tilde \chi_i := \chi_i \circ f^{-1} = x_i\) inside \(W\) and 
  we have for all \(y \in f^{-1}(W)\), 
  \[\mathfrak{D}(\chi_i)\mid_y = \sum_{j = 1}^n \tilde \xi_j \mid_{f(y)} 
    \pdv{\tilde \chi_i}{x_j}\Big\vert_{f(y)} = \tilde \xi_i \mid_{f(y)}.\]
\end{proof}

\subsection{Vector Bundle}

Vector bundle is an important tool in both differential geometry and 
algebraic geometry and is somehow a generalization of the tangent bundles. 
We will in this small section define the vector bundle and prove some properties 
about it.

\begin{definition}[Vector Bundle]
  Let \(X\) be an \(n\)-dimensional manifold. A vector bundle over \(X\) consists 
  of the data 
  \begin{itemize}
    \item a manifold \(E\) of dimension \(n + r\);
    \item a smooth surjection \(\pi : E \to X\);
    \item an atlas \(\{(U_i, f_i)\}_{i \in I}\) for \(X\) and an atlas 
      \(\{(V_i, g_i)\}_{i \in I}\) for \(E\) such that, 
      \begin{itemize}
        \item \(V_i = \pi^{-1}(U_i)\) for all \(i \in I\);
        \item \(g_i(V_i) = f_i(U_i) \times \mathbb{R}^r \subseteq 
          \mathbb{R}^{n + r}\) for all \(i \in I\);
        \item \(\text{pr}_1 \circ g_i(v) = f_i(\pi(v))\) for all \(i \in I\) and 
          \(v \in V_i\);
        \item for each \(x \in X\), the level set \(E_x := \pi^{-1}(\{x\})\) is 
          a vector space of dimension \(r\) such that for all \(i \in I\), the map 
          \(g_i \mid_{E_x} : E_x \to \mathbb{R}^r\) is an isomorphism.
      \end{itemize}
  \end{itemize}
  The number \(r\) is called the rank of the vector bundle and the vector spaces 
  \(E_x\) are known as fibres of the vector bundle.
\end{definition}

We see that in some sense vector bundles embed a manifold inside a larger manifold 
and for each point in the original manifold, we associate it with a real 
vector space in the larger manifold. As one might expect, the tangent bundle 
is a vector bundle and with a similar construction 
(\(T^*X := \bigcup_{x \in X} T^*_x X\)) we may define the cotangent 
bundle which is also a vector bundle. Another important vector bundle is the 
trivial vector bundle \(E := X \times \mathbb{R}^r\) with the map 
\((x, v) \in X \times \mathbb{R}^r \mapsto x\).

\begin{definition}[Section]
  Let \(X\) be an \(n\)-dimensional manifold and let \(\pi : E \to X\) be a 
  vector bundle. A section of \(E\) is a smooth morphism \(s : X \to E\) such 
  that \(\pi \circ s = \text{id}_X\).
\end{definition}

A section of the tangent bundle is a vector field. 

By definition, if \((E, \pi : E \to X)\) is a vector bundle of \(X\), for 
all \(x \in X\), the level set \(\pi^{-1}(\{x\})\) is a vector space, and thus, 
it makes sense to map \(x \mapsto 0_{\pi^{-1}(\{x\})}\). This is clearly a 
section and is called the zero section.

\begin{definition}
  Let \(X\) be a manifold and let \(\pi_1 : E_1 \to X, \pi_2 : E_2 \to X\) be 
  two vector bundles. An isomorphism between \(E_1, E_2\) is a diffeomorphism 
  \(F : E_1 \to E_2\) such that \(\pi_2 \circ F = \pi_1\) and the induced 
  function \(F_x : (E_1)_x \to (E_2)_x\) is an isomorphism of vector spaces 
  for all \(x \in X\).
\end{definition}

We say a vector bundle \((E, \pi)\) is trivial if it is isomorphic to the 
trivial vector bundle \(X \times \mathbb{R}^r\) for some \(r > 0\).

\begin{proposition}
  Two isomorphic vector bundles have the same rank.
\end{proposition}
\begin{proof}
  Clear as a linear isomorphism preserves dimension.
\end{proof}

\begin{definition}[Line Bundle]
  A line bundle is a vector bundle of rank 1.
\end{definition}

\begin{proposition}
  Let \(X\) be a manifold and let \(\pi : L \to X\) be a line bundle on 
  \(X\) which admits a section \(s : X \to L\) which is nowhere zero, i.e. 
  \(s(x) \neq 0 \in L_x\) for all \(x \in X\). Then \(L\) is trivial.
\end{proposition}
\begin{proof}
  Consider the function \(F : X \times \mathbb{R} \to L : (x, v) \mapsto v \cdot s(x)\).
  It is clear that \(F\) commutes with the projection map \(X \times \mathbb{R} \to X\) 
  and \(L \to X\) and for \(x \in X\) as \(s(x) \neq 0\), it induces an 
  isomorphism of vector spaces. 

  We will now show \(F, F^{-1}\) is smooth. Since \(L\) is a vector bundle, 
  for each \(x \in X\), there exists a chart \((U, f)\) in \(X\) containing 
  \(x\) and a chart \((V, g)\) on \(Y\) such that \(V = \pi^{-1}(U)\) and 
  \(g(V) = f(U) \times \mathbb{R}\). Then 
  \[\tilde s := g \circ s \circ f^{-1} : f(U) \to f(U) \times \mathbb{R} = g(V)\]
  is smooth (as \(s\) is smooth). Thus, 
  \[\tilde F := g \circ (f^{-1}, \text{id}_{\mathbb{R}}) : 
    f(U) \times \mathbb{R} \to f(U) \times \mathbb{R} : 
    (y, v) \mapsto (y, v \cdot \text{pr}_2 \circ \tilde s(y)),\]
  is smooth and hence, it follows \(\tilde F^{-1}\) is smooth and both 
  \(F, F^{-1}\) are smooth. Hence, \(F\) is an isomorphism of vector bundles 
  between \(L\) and the trivial vector bundle.
\end{proof}

This proposition can be generalized into the following.

\begin{proposition}
  Let \(X\) be a manifold and let \(\pi : L \to X\) be a vector bundle of rank 
  \(r\) which admits sections \(s_1, \cdots, s_r : X \to L\) such that 
  for all \(x \in X\), \(\{s_1(x), \cdots, s_r(x)\}\) is linearly independent 
  in \(E_x\) (and so form a basis). Then \(L\) is trivial.
\end{proposition}
\begin{proof}
  See problem sheet.
\end{proof}

\newpage
\section{Forms and Integration}

\subsection{1-form}

\begin{definition}
  Let \(X\) be a manifold. A 1-form on \(X\) is a section of \(T^*X\), i.e. 
  a smooth function 
  \[\alpha : X \to T^* X\]
  such that \(\pi \circ \alpha = \text{id}_X\).
\end{definition}

Let \(X\) be an \(n\)-dimensional manifold and suppose \(x \in X\) and let 
\(\alpha\) be a 1-form on \(X\) and \((U, f)\) be a chart on \(X\) containing 
\(x\). We recall that we have the linear isomorphism 
\(\nabla_f : T^*_x X \to \mathbb{R}^n\). Thus, we obtain a smooth morphism 
\[\tilde \alpha : f(U) \to \mathbb{R}^n : y \mapsto \nabla_f(\alpha\mid_{f^{-1}(y)}).\]
On the other hand, if \((U', f')\) is also a chart on \(X\) containing 
\(x\), then the corresponding 1-form on \(f'(U')\) \(\tilde \alpha'\) can be 
written as 
\[\tilde \alpha'(f'(x)) = \tilde \alpha(f(x)) D\phi^{-1}\mid_{f'(x)}\]
by recalling \(\nabla_{f'}(dh\mid_x) = \nabla_f(dh\mid_x) D\phi^{-1}\mid_{f'(x)}\)
where \(h \in C^\infty(X)\) and \(\phi\) is the transition function. 

We will now construct a 1-form \(dh\) on \(X\) from any smooth function 
\(h \in C^\infty(X)\). Let \(U \subseteq \mathbb{R}^n\) be an open subset and 
let \(h \in C^\infty(U)\). Then, for any \(x \in U\), we recall 
\(dh\mid_x \in T^*_x U = C^\infty / R_x(U)\). Since \(T^*_x U \cong \mathbb{R}^n\) 
canonically, we can write \(dh\mid_x = 
(\partial_{x_1} h, \cdots, \partial_{x_n} h)\mid_x \in \mathbb{R}^n\).
Thus, we have a smooth 1-form on \(U\) 
\[dh : U \to U \times \mathbb{R}^n : x \mapsto (x, dh\mid_x).\]
This construction provides some 1-forms from the co-ordinate functions 
\(x_i : U \to \mathbb{R}\) resulting in the 1-forms \(dx_i\) for 
\(i = 1, \cdots, n\). We note that \(\{dx_i(x)\}\) form a basis of 
\(T^*_x U\), and so, if \(\alpha\) is a 1-form on \(U\), we may write 
\(\alpha = \alpha_1 dx_1 + \cdots + \alpha_n dx_n\) where 
\(\alpha_1, \cdots, \alpha_n\) are smooth functions on \(U\).
Applying this to \(dh\) for \(h \in C^\infty(U)\), we have 
\[dh = \pdv{h}{x_1} dx_1 + \cdots + \pdv{h}{x_n} dx_n.\]
This is known as the exact 1-forms.

Let us now generalize this to manifolds. Let \(X\) be a manifold and let 
\(h \in C^\infty(X)\). Then for any \(x \in X\), we have 
\(dh\mid_x \in T^*_x X\), and so, we obtain a function 
\[dh : X \to T^* X : x \mapsto dh\mid_x.\]
We will show \(dh\) is smooth. Let \((U, f)\) be a chart on \(X\) containing 
\(x\). Define \(\tilde h := h \circ f^{-1} \in C^\infty(f(U))\) and if 
\((V, g)\) is the corresponding chart on \(T^* X\), we have 
\(d\tilde h = g \circ dh \circ f^{-1}\) which is a smooth 1-form on \(f(U)\).
Thus, \(dh\) is smooth as required and hence, \(dh\) is a 1-form on \(X\).

Suppose now that \(F : X \to Y\) is a smooth function between manifolds, 
then the Jacobian of \(F\) defines a map \(DF\mid_x : T_x X \to T_{F(x)} Y\). 
Recalling that the cotangent space is canonically isomorphic to the dual 
of the tangent space, the dual map of \(DF\) can be interpreted as a map 
\[DF^*\mid_x : T^*_{F(x)}Y \to T^*_x X.\]
Now, let \(h \in C^{\infty}(Y)\), then \(h \circ F \in C^\infty(X)\) and 
\[DF^*\mid_x(dh\mid_{F(x)}) = d(h \circ F)\mid_x \in T^*_x X.\]
Hence, glueing these maps together, we obtain a 1-form on \(X\).

\begin{definition}[Pull-back of 1-form on Euclidean Spaces]
  Let \(U \subseteq \mathbb{R}^n\) and \(V \subseteq \mathbb{R}^k\) be open and 
  let \(F : U \to V\) be a smooth function. 
  Then, if \(\alpha\) be a 1-form on \(V\), 
  \[F^* \alpha : U \to T^* U : x \mapsto DF^*\mid_x(\alpha\mid_{F(x)})\]
  is a 1-form on \(U\).
\end{definition}

To show that this is indeed a 1-form on \(X\), we will show it is smooth. 
Let us first consider a smooth map \(F = (F_1, \cdots, F_k)\) between 
\(U \subseteq \mathbb{R}^n\) and \(V \subseteq \mathbb{R}^k\) where 
\(F_i \in C^\infty(U)\). Let \(\alpha\) be a 1-form on \(V\), then 
\[F^*\alpha : U \to U \times \mathbb{R}^n : z \mapsto (DF\mid_z)^T \alpha\mid_{F(z)}.\]
\(F^*\alpha\) is clearly smooth, and so \(F^*\alpha\) is a 1-form on \(U\).

It is not difficult to see that \(F^*\) is linear, i.e. for \(\alpha_1, \alpha_2\) 
1-forms on \(V\) and \(\lambda_1, \lambda_2 \in \mathbb{R}\), then 
\[F^*(\lambda_1\alpha_1 + \lambda_2\alpha_2) = \lambda_1 F^*\alpha_1 + 
  \lambda_2 F^*\alpha_2.\] 
Thus, writing the form \(\alpha\) on \(V\) in terms of the basis representation, 
\(\alpha = \alpha_1 dy_1 + \cdots + \alpha_k dy_k\), we have 
\(F^* \alpha = (\alpha_1 \circ F) F^* dy_1 + \cdots + (\alpha_k \circ F) F^* dy_k\).
Furthermore, for each \(i\), we see 
\[F^*dy_i = \pdv{F_j}{x_1} dx_1 + \cdots + \pdv{F_j}{x_n} dx_n.\]

\begin{definition}[Pull-back of 1-form]
  Let \(X\) and \(Y\) be manifolds and \(F : X \to Y\) be a smooth function. 
  Then, if \(\alpha\) be a 1-form on \(Y\), 
  \[F^*\alpha : X \to T^* X : x \mapsto DF^* \mid_x (\alpha\mid_{F(x)})\]
  is a 1-form on \(X\). Moreover, if \(h \in C^\infty(Y)\), then 
  \(F^*dh = d(h \circ F)\).
\end{definition}

\subsection{\(p\)-form}

In order to generalize 1-forms to \(p\)-forms, we will construct an operator 
called the wedge product. This is a linear algebra construction and is also used 
else where than manifolds. As a result, the proofs required for 
all linear algebra constructions and propositions are left as an exercise.

\begin{definition}[Multilinear Map]
  Let \(V\) be a \(\mathbb{R}\)-vector space and for any integer \(p \ge 0\), 
  a multilinear map \(\omega : V^p \to \mathbb{R}\) is a function which is 
  linear with respect to each term (by convention, we denote \(V^0\) as \(\mathbb{R}\)). 
\end{definition}

\begin{definition}[Signature of Permutation]
  Given \(\sigma \in S_p\) where \(S_p\) is the \(p\)-permutation group, 
  we denote the siganature of \(\sigma\) by 
  \[\epsilon(\sigma) := (-1)^m,\]
  where \(m\) is the number of transpositions in a decomposition of \(\sigma\).

  We recall that in group theory we refer to this as the sign of a permuation.
\end{definition}

\begin{definition}[Alternating \(p\)-form]
  A multilinear map \(\omega : V^p \to \mathbb{R}\) is called an alternating 
  \(p\)-form if for all \(v_1, \cdots, v_p \in V\) and for all \(\sigma \in S_p\), 
  we have 
  \[\omega(v_{\sigma(1)}, \cdots, v_{\sigma(n)}) = \epsilon(\sigma)\omega(v_1, \cdots, v_n).\]

  We denote \(\wedge^p V^*\) the set of all alternating \(p\)-forms. 
  It is clear that \(\wedge^p V^*\) form a vector space under the natural 
  operations and we call this the \(p\)-th exterior power of \(V\).
\end{definition}

We note that for \(p = 1\), \(\wedge V^* = V^* = \text{Hom}(V, \mathbb{R})\) 
and hence the notation. On the other hand, for \(p = 0\), \(\wedge^0 V^*\) 
is the set of all linear maps from \(\mathbb{R}\) to \(\mathbb{R}\) which is 
isomorphic to \(\mathbb{R}\).

\begin{definition}[Exterior Product]
  Let \(p, q\) be positive integers. Then, we denote 
  \[S_{p, q} := \{\sigma \in S_{p + q} \mid \sigma(1) < \cdots < \sigma(p), 
    \sigma(p + 1) < \cdots < \sigma(p + 1)\}.\]
  Then, given \(\omega_1 \in \wedge^p V^*\) and \(\omega_2 \in \wedge^q V^*\),
  we define the exterior product \(\omega_1 \wedge \omega_2 \in \wedge^{p + q} V^*\) 
  by definition, for each \(v_1, \cdots, v_{p + q} \in V\), 
  \[\omega_1 \wedge \omega_2(v_1, \cdots, v_{p + q}) := 
    \sum_{\sigma \in S_{p, q}} \epsilon(\sigma) \omega_1(v_{\sigma(1)}, \cdots, v_{\sigma(p)}) 
    \omega(v_{\sigma(p + 1)}, \cdots, v_{\sigma(p + q)}).\]
\end{definition}

This definition is not very useful when computing and as we shall see, there 
is a much more natural characterization of the exterior product which allows us 
to compute the exterior product more effectively.

\begin{proposition}
  Let \(\omega_1, \omega_2 \in \wedge^1 V^*\). Then 
  \[\omega_1 \wedge \omega_2(v, w) = \omega_1(v)\omega_2(w) - \omega_1(w)\omega_2(v).\]
  More generally, if \(\omega_1, \cdots, \omega_p \in \wedge^1 V^*\), then 
  \[\omega_1 \wedge \cdots \wedge \omega_p(v_1, \cdots, v_p) = 
  \det\begin{pmatrix}
    \omega_1(v_1) & \omega_1(v_2) & \cdots & \omega_1(v_p) \\
    \omega_2(v_1) & \omega_2(v_2) & \cdots & \omega_2(v_p) \\
    \vdots & \vdots &  & \vdots \\
    \omega_p(v_1) & \omega_p(v_2) & \cdots & \omega_p(v_p)
  \end{pmatrix}\]
\end{proposition}

\begin{proposition}
  Let \(\omega_i \in \wedge^{p_i} V^*\) for \(i = 1, \cdots, 3\). Then 
  \begin{itemize}
    \item (associativity) \(\omega_1 \wedge (\omega_2 \wedge \omega_3) = 
      (\omega_1 \wedge \omega_2) \wedge \omega_3\);
    \item (distributivity) if \(p_2 = p_3\), then 
      \(\omega_1 \wedge (\omega_2 + \omega_3) = 
      \omega_1 \wedge \omega_2 + \omega_1 \wedge \omega_3\);
    \item (super-commutativity) \(\omega_1 \wedge \omega_2 = 
      (-1)^{p_1p_2} \omega_2 \wedge \omega_1\).
  \end{itemize}
\end{proposition}

\begin{definition}[Pull-back of Alternating Form]
  Let \(\Phi : V \to W\) be a linear map between vector spaces and suppose 
  \(\omega \in \wedge^p W^*\). Then, the pull-back of \(\omega\) along 
  \(\Phi\) is the \(p\)-form \(\Phi^*\omega \in \wedge^p V^*\) such that 
  \[(\Phi^* \omega)(v_1, \cdots, v_p) := \omega(\Phi(v_1), \cdots, \Phi(v_p)).\] 
\end{definition}

\begin{proposition}
  Let \(\Phi : V \to W\) and \(\psi : W \to Z\) be linear maps between vector 
  spaces. Then 
  \begin{itemize}
    \item the pull-back \(\Phi^* : \wedge^p W^* \to \wedge^p V^* : \omega \mapsto \Phi^* \omega\) 
      is linear and preserves the exterior product, i.e. 
      \[\Phi^*(\omega_1 \wedge \omega_2) = \Phi^*\omega_1 \wedge \Phi^* \omega_2;\]
    \item \((\Psi \circ \Phi)^* \omega = \Phi^* \Psi^* \omega\);
    \item if \(V = W\) and \(p = \dim V\), then \(\Phi^* \omega = \det(\Phi) \omega\).
  \end{itemize}
\end{proposition}

\begin{proposition}
  If \(p > n := \dim V\), then \(\wedge^p V^* = 0\). 
\end{proposition}

\begin{proposition}
  Let \(v_1, \cdots, v_n \in V\) be a basis and let \(v_1^\vee, \cdots, v_n^\vee\) 
  be its dual basis. Then, for all \(0 < p \le n\), 
  \[\{v_{i_1} \wedge \cdots \wedge v_{i_p} \mid i_1 < \cdots < i_p\}\]
  form a basis of \(\wedge^p V^*\) (so \(\dim \wedge^p V^*\) is \(n\) choose \(p\)). 
\end{proposition}

Finally, with the above constructions, we may return to the theory of manifolds 
and we will define the differential forms.

\begin{definition}[\(p\)-th Exterior Bundle]
  Let \(X\) be an \(n\)-dimensional manifold and let \(x \in X\). We denote 
  \[\wedge^p T^*_x X := \wedge^p (T_x X)^*.\]
  Furthermore, we define
  \[\wedge^p T^* X := \bigcup_{x \in X} \wedge^p T^*_x X.\]
  We call this the \(p\)-th exterior bundle of \(X\) and with other bundles, 
  there exists a projection \(\pi : \wedge^p T^* X \to X : 
    \omega \in \wedge^p T^*_x X \to x\).
\end{definition}
We note that for \(p = 1\), \(\wedge^1 T^*_x X = (T_x X)^* = T^*_x X\).

\begin{definition}[Differential \(p\)-form]
  A differential \(p\)-form on \(X\) is a section of \(\wedge^p T^* X\).
\end{definition}

We introduce the following notations 
\[\Omega^p(X) := \{\omega \mid \omega \text{ is a differential \(p\)-form on \(X\)}\},\]
and 
\[\Omega^\bullet X := \bigoplus_{p = 0}^n \Omega^p(X).\]
We note that \(\Omega^0(X) = C^\infty(X)\) and if \(X\) has dimension \(n\), 
then \(\Omega^p(X) = 0\) for all \(p > n\).

\begin{definition}
  Given \(\omega_1 \in \Omega^p(X)\) and \(\omega_2 \in \Omega^q(X)\), we 
  define \(\omega_1 \wedge \omega_2 \in \Omega^{p + q}X\) where 
  \[\omega_1 \wedge \omega_2 : X \to \wedge^{p + q} T^* X : x \mapsto 
    \omega_1(x) \wedge \omega_2(x).\]
  It follows by the definition that associativity, distributivity and 
  super-commutativity still hold.
\end{definition}

Again, similar to alternating forms, we may define the pull-back of 
differential forms.

\begin{definition}[Pull-back of Differential \(p\)-form]
  Let \(X, Y\) be manifolds and suppose \(F : X \to Y\) is smooth. Then, for 
  all \(x \in X\), we have the Jacobian of \(F\) at \(x\) is a linear map 
  \[DF\mid_x : T_x X \to T_{F(x)} Y.\]
  Thus, we may define 
  \[F^* : \wedge^p T^*_{F(x)} Y \to \wedge^p T^*_x X\]
  such that, for all \(\omega \in \wedge^p T^*_{F(x)}Y\) and 
  \(v_1, \cdots, v_p \in T_x X\),
  \[F^* \omega(x)(v_1, \cdots, v_p) := 
    \omega(F(x))(DF\mid_x v_1, \cdots, DF\mid_x v_p).\]
  Thus, as we may define the pull-back given any \(x \in X\), given a differential 
  \(p\)-form \(\omega\) on \(Y\), we have a differential \(p\)-form \(F^* \omega\) 
  on \(X\) given by 
  \[F^* \omega : X \mapsto \wedge^p T^* X : x \mapsto 
    F^*\omega(x).\]
  \end{definition}
  
With this in mind, we have define \(F^* : \Omega^p(Y) \to \Omega^p(X)\) 
where it is not difficult to show \(F^*\) is linear. Moreover, 
given \(\omega_1 \in \Omega^p(Y)\) and \(\omega_2 \in \Omega^q(Y)\), we 
have 
\[F^*(\omega_1 \wedge \omega_2) = F^*(\omega_1) \wedge F^*(\omega_2).\]
Finally, we see that if \(G : Y \to Z\) is also smooth and \(\omega \in \Omega^p(Z)\), 
then 
\[(G \circ F)^*\omega = F^* G^* \omega.\]
  
\begin{definition}
  Let \(U \subseteq \mathbb{R}^n\) be open and let \(x \in U\). Then 
  \(\left\{\pdv{x_1}, \cdots, \pdv{x_n}\right\}\) is a basis of 
  \(T_x U\) and we define \(dx_i := \left(\pdv{x_1}\right)^\vee\), i.e. 
  \(\{dx_i\}\) is the dual basis of \((T_x U)^* \cong T^*_x U\). Then, 
  a basis of \(\wedge^p T^*_x U\) is given by 
  \[\{dx_{i_1} \wedge \cdots \wedge dx_{i_p} \mid 1 \le i_1 < \cdots < i_p \le n\},\]
  and a differential \(p\)-form on \(U\) is locally given by 
  \[\omega = \sum_{|I| = p} h_I dx_{i_1} \wedge \cdots \wedge dx_{i_p}\]
  where \(h_I : U \to \mathbb{R}\) is smooth for all \(I = (i_1, \cdots, i_p)\).
\end{definition}

By recalling that \(dx_i \wedge dx_j = - dx_j \wedge dx_i\) for all 
\(i, j \in \{1, \cdots, n\}\), we have \(dx_i \wedge dx_i = 0\).

Let \(F : U \to V\) be a smooth function between open sets of \(\mathbb{R}^n\) 
and suppose \(\omega : X \to \wedge^n T^* X\) is an \(n\)-form on \(V\). Then, 
locally, we may write \(\omega = hdy_1 \wedge \cdots \wedge hdy_n\) where 
\(h : U \to \mathbb{R}\) is a smooth function. With this in mind, 
we have the pull-back of \(\omega\) along \(F\) is given locally by 
\[F^* \omega(x) = h \circ F(x) \cdot \det DF\mid_x \cdot dx_1 \wedge \cdots \wedge dx_n.\]

\subsection{de Rham Differential}

Recall that given \(U \subseteq \mathbb{R}^n\) is open, and \(h \in C^\infty(U)\), 
the differential of \(h\) is defined locally as 
\[dh := \sum_{i = 1}^n \pdv{h}{x_i} dx_i,\]
i.e. \(dh(\xi) = \xi(h)\) for any vector field \(\xi : U \to TU\).
Alternatively, we have \(dh = h^* dx\) where \(dx\) is the 
standard 1-form on \(\mathbb{R}\).

More generally, recall that if \(\omega \in \Omega^p(U)\) is a 
differential \(p\)-form, it is locally given by 
\[\omega = \sum_{|I| = p} h_I dx_{i_1} \wedge \cdots \wedge dx_{i_p}.\]
Then, the differential of \(\omega\) is locally given by 
\[d\omega = \sum_{|I| = p} dh_I \wedge dx_{i_1} \wedge \cdots \wedge dx_{i_p},\]
and so, \(d\omega \in \Omega^{p + 1}(U)\) is a differential \(p + 1\)-form.
This process induces a map \(d : \Omega^p(U) \to \Omega^{p + 1}(U)\) and 
is called the de Rham differential of \(U\).

For manifolds the idea is similar. Let \(X\) be an \(n\)-dimensional manifold 
and \(\pi : E \to X\) be a vector bundle of rank \(r\). Then we recall that 
there exists an atlas \(\{(U_i, f_i)\}_{i \in I}\) for \(X\) and an atlas 
\(\{(V_i, g_i)\}_{i \in I}\) for \(E\) such that 
\[V_i = \pi^{-1}(U_i) \text{ and } g_i(V_i) = f_i(U_i) \times \mathbb{R}^r,\]
for all \(i \in I\). Then, if \(s : X \to E\) is a section, i.e. 
smooth and \(\pi \circ s = \text{id}_X\), we may define 
\[\tilde s_i := g_i \circ s \circ f_i^{-1} : f_i(U_i) \to f_i(U_i) \times \mathbb{R}^r\]
for all \(i \in I\). Furthermore, for any \(i, j \in I\) where \(U_i \cap U_j \neq 
\varnothing\), we have the transition functions 
\[\phi_{ij} : f_j(U_i \cap U_j) \to f_i(U_i \cap U_j), \text{ and } 
  \Phi_{ij} : f_j(U_i \cap U_j) \times \mathbb{R}^r \to 
    f_i(U_i \cap U_j) \times \mathbb{R}^r.\]
In particular, the following diagram is commutative,
\[\begin{tikzcd}
  f_j(U_i \cap U_j) \arrow{r}{\tilde s_j} 
    \arrow{d}{\phi_{ij}} & f_j(U_i \cap U_j) \times \mathbb{R}^r 
    \arrow{d}{\Phi_{ij}} \\
  f_i(U_i \cap U_j) \arrow{r}{\tilde s_i} & 
  f_i(U_i \cap U_j) \times \mathbb{R}^r
\end{tikzcd}\]
and so \(\Phi_{ij} \circ \tilde s_j = \tilde s_i \circ \phi_{ij}\).
It is easy to check the reverse is also true, i.e. if there exists smooth
\(\tilde s_i : f_i(U_i) \to f_i(U_i) \times \mathbb{R}^r\) for all 
\(i \in I\) such that \(\Phi_{ij} \circ \tilde s_j = \tilde s_i \circ \phi_{ij}\) 
for all \(i, j \in I\), there exists a unique section \(s\) such that 
\(\tilde s_i = g_i \circ s \circ f_i^{-1}\) for all \(i \in I\).

With this in mind, we may define the de Rham differential on a manifold. 
Let \(X\) be an \(n\)-dimensional manifold and let \(\omega \in \Omega^p(X)\) 
be a \(p\)-form. Let \(\{(U_i, f_i)\}_{i \in I}\) be an atlas on \(X\). 
Then, for each \(i \in I\), we can define 
\[\omega_i := (f_i^{-1})^* \omega \in \Omega^p(f_i(U_i)).\]
As these are \(p\)-forms on subsets of \(\mathbb{R}^n\), if makes sense 
to take their de Rham differential \(d\omega_i\) to be \(p + 1\)-forms.
Finally, as it is clear that these \(p + 1\)-forms satisfies the commutative 
diagram as presented above, there exists a unique section \(d\omega\) 
such that satisfying the commutative diagram for all charts. We call 
\(d\omega\) the de Rham differential of \(\omega\) and we denote the 
de Rham operator by \(d : \Omega^p(X) \to \Omega^{p + 1}(X)\).

With this construction in mind, in particular, we note that this construction 
is local, to prove properties about the de Rham differential, it suffice to 
prove them locally. The following three propositions illustrate this.

\begin{proposition}[Leibniz Rule]
  Given \(\omega_1 \in \Omega_1^p(X)\) and \(\omega_2 \in \Omega_2^q(X)\)
  we have,
  \[d(\omega_1 \wedge \omega_2) = d\omega_1 \wedge \omega_2 + (-1)^p \omega_1 
    \wedge d\omega_2.\]
\end{proposition}
\begin{proof}
  Let \(x \in X\), and take \((U_i, f_i)\) be a chart on \(X\) containing \(x\), 
  then by construction, \(d\omega(x) = d\omega_i(x) = d(f_i^{-1})^* \omega(f_i(x)) 
  \in \Omega^p(f_i(U_i))\).
  Thus, WLOG. we may assume \(X = U \subseteq \mathbb{R}^n\) where \(U\) is open.

  Write \(\omega_1 = h_1 dx_{i_1} \wedge \cdots dx_{i_p}\) and 
  \(\omega_2 = h_2 dx_{j_1} \wedge \cdots dx_{j_q}\) where \(h_1, h_2 \in C^\infty(U)\) 
  (we note that we omitted the sum since we see that if the Leibniz rule is 
  true for one term of the sum, it is true for the sum as the Leibniz rule 
  is ``linear''). Then, by definition, we have 
  \[\begin{split}
    d(\omega_1 \wedge \omega_2) &= d(h_1 h_2 dx_{i_1} \wedge \cdots \wedge dx_{i_p} 
      \wedge dx_{j_1} \wedge \cdots \wedge dx_{j_q})\\ 
      & = d(h_1 h_2) \wedge dx_{i_1} \wedge \cdots \wedge dx_{i_p} 
      \wedge dx_{j_1} \wedge \cdots \wedge dx_{j_q}\\
      & = (h_2 dh_1 + h_1 dh_2) \wedge dx_{i_1} \wedge \cdots \wedge dx_{i_p}
      \wedge dx_{j_1} \wedge \cdots \wedge dx_{j_q}\\
      & = (dh_1 \wedge dx_{i_1} \wedge \cdots \wedge dx_{i_p}) \wedge
        (h_2 dx_{j_1} \wedge \cdots \wedge dx_{j_q})\\
        & \hspace{1cm} + 
        (-1)^p(h_1 \wedge dx_{i_1} \wedge \cdots \wedge dx_{i_p}) \wedge
        (dh_2 \wedge dx_{j_1} \wedge \cdots \wedge dx_{j_q})\\
      & = d\omega_1 \wedge \omega_2 + (-1)^p \omega_1 \wedge d\omega_2,
  \end{split}\]
  where the second to last equality is due to super-commutativity where 
  we move \(dh_2\) \(p\)-times to the right. 
\end{proof}

\begin{proposition}
  For all \(p \ge 0\), the map \(d \circ d : \Omega^p(X) \to \Omega^{p + 2}(X)\)
  is the zero map.
\end{proposition}
\begin{proof}
  Again, WLOG. assume \(X = U \subseteq \mathbb{R}^n\) and write 
  \(\omega = h dx_{i_1} \wedge \cdots dx_{i_p} \in \Omega^p(U)\) where 
  \(h \in C^\infty(U)\). Then, 
  \[d(d\omega) = \sum_{k, j = 1}^n \pdv{h}{x_k}{x_j} dx_k \wedge dx_j \wedge 
    dx_{i_1} \wedge \cdots \wedge dx_{i_p}.\]
  Now, since \(h \in C^\infty(U)\), we have 
  \[\pdv{h}{x_k}{x_j}dx_k \wedge dx_j = - \pdv{h}{x_j}{x_k} dx_j dx_k,\]
  and so, by the symmetry of the sum, 
  \[d(d\omega) = - d(d\omega)\]
  implying \(d(d\omega) = 0\). As \(\omega\) was chosen arbitrarily, this implies 
  \(d \circ d = 0\) as required.
\end{proof}

\begin{proposition}
  If \(F : X \to Y\) is a smooth function between manifolds, then for any 
  \(\omega \in \Omega^p(Y)\), \(F^* d\omega = d(F^*\omega)\).
\end{proposition}
\begin{proof}
  Assuming \(Y = U\) we write \(\omega = h dy_{i_1} \wedge \cdots 
  \wedge dy_{i_p} \in \Omega^p(U)\) 
  where \(h \in C^\infty(U)\). Consider 
  \[F^* \omega = h \circ F (F^* dy_{i_1}) \wedge \cdots \wedge (F^* dy_{i_p}).\]
  By recalling \(F^* dg = d(g \circ F)\) for all \(g \in C^\infty(Y)\), we have
  \(d(F^*dy_{i_j}) = d^2(y_{i_j} \circ F) = 0\). Thus, 
  \[\begin{split}
    d(F^* \omega) & = d(h \circ F) \wedge (F^* dy_{i_1}) \wedge \cdots 
    \wedge (F^* dy_{i_p})\\
    & = F^* dh \wedge (F^* dy_{i_1}) \wedge \cdots \wedge (F^* dy_{i_p}) 
      = F^* (dh \wedge dy_{i_1} \wedge \cdots \wedge dy_{i_p}) = F^*(d\omega).
  \end{split}\]
  by the Leibniz rule where terms containing \(d(F^* dy_{i_j})\) vanishes.
\end{proof}

\begin{definition}
  Let \(\omega \in \Omega^p(X)\) be a differential \(p\)-form. Then,
  \begin{itemize}
    \item \(\omega\) is said to be closed if \(d\omega = 0\);
    \item \(\omega\) is said to be exact if there exists some 
      \(\omega' \in \Omega^{p - 1}(X)\) such that \(d\omega' = \omega\).
  \end{itemize}
\end{definition}

It is clear that if \(\omega\) is exact, then \(\omega = d\omega'\) and so, 
\(d\omega = d^2 \omega' = 0\) and hence, it is closed.

\subsection{Integration}

Recall that, for a smooth function \(F : X \to X\) where \(X\) is an \(n\)-dimensional 
manifold, we may define the pull-back of \(\omega \in \Omega^n(X)\) along \(F\) 
such that for all \(x \in X\),
\[F^* \omega(x) = \det(DF\mid_x) \cdot \omega(F(x)).\]
Now, assume that \(\{U_i, f_i\}\) is a smooth atlas on \(X\) and for \(i, j \in I\), 
\(\phi_{ij}\) is a transition function from \((U_j, f_j)\) to \((U_i, f_i)\). 
Then, given an \(n\)-form \(\omega \in \Omega^n(f_i(U_i))\) such that 
\[\omega = hdy_1 \wedge \cdots \wedge dy_n\]
for some \(h \in C^\infty(f_i(U_i))\), we may consider its pull-back along 
\(\phi_{ij}\). In particular, 
\[\phi^*_{ij} \omega(x) = (h \circ \phi_{ij})(x)\det(D \phi_{ij}\mid_x) 
  dx_1 \wedge \cdots \wedge dx_n \in \Omega^n(f_j(U_i \cap U_j)).\]
We note the similarity of this equation to the change of variable formula 
in multivariable calculus and indeed, this will be our motivation for integration 
on manifolds.

In the case of \(\mathbb{R}^n\), we have the following proposition.

\begin{proposition}
  Let \(D \subseteq \mathbb{R}^n\) be compact with border of measure zero. 
  Then, given \(h : \mathbb{R}^n \to \mathbb{R}\) smooth and 
  \(\phi : D \to \phi(D) \subseteq \mathbb{R}^n\) an diffeomorphism, we have 
  \[\int_{\phi(D)} hdy_1 \wedge \cdots \wedge dy_n = 
    \int_D h \circ \phi |\det d\phi| dx_1 \wedge \cdots \wedge dx_n\]
\end{proposition}

Given \(\omega \in \Omega^n(D)\), where \(\omega = h dx_1 \wedge \cdots \wedge dx_n\), 
we define 
\[\int_D \omega := \int_D h dx_1 \wedge \cdots \wedge dx_n.\]

\begin{corollary}\label{change-of-var}
  If \(\Phi : V \to U\) is a diffeomorphism such that \(\det D\Phi\mid_x > 0\) 
  for all \(x \in V\) (equivalently, there exists some \(x \in V\) such that 
  \(\det D\Phi\mid_x > 0\)). Then, 
  \[\int_U \omega = \int_V \Phi^* \omega.\] 
\end{corollary}

Before generalizing the above, let us first consider the notion of 
orientation.

\begin{definition}[Orientation]
  Let \(V\) be a vector space over \(\mathbb{R}\) of dimension \(n\) and let 
  \(B_1 = (v_1, \cdots, v_n)\) and \(B_2 = (w_1, \cdots, w_n)\) be two ordered 
  basis of \(V\), then \(B_1, B_2\) are said to have the same orientation if 
  \(\det T > 0\) where \(T : V \to V := v_i \mapsto w_i\) (i.e. \(T\) is the 
  change of basis matrix from \(B_1\) to \(B_2\)).
\end{definition}

It is clear that \(\det T \neq 0\) since \(T\) is a linear isomorphism.

\begin{definition}
  Given \(\omega \in \wedge^n V^*\). Then an orientation of \(\wedge\) of \(V\) 
  is the set of all ordered basis \((v_1, \cdots, v_n)\) of \(V\) such that
  \(\omega(v_1, \cdots, v_n) > 0\).
\end{definition}

\begin{proposition}
  Given \(B_1 = (v_1, \cdots, v_n)\) and \(B_2 = (w_1, \cdots, w_n)\) ordered 
  basis of \(V\) with the same orientation, then \(\omega(v_1, \cdots, v_n) > 0\) 
  if and only if \(\omega(w_1 \cdots w_n) > 0\).
\end{proposition}

\begin{definition}[Orientation Preserving]
  Let \(\Phi : V \to W\) be an isomorphism of vector spaces with orientations 
  \(\wedge_1, \wedge_2\) on \(V\) and \(W\) respectively. Then \(\Phi\) is said 
  to be orientation preserving if an ordered basis of \(V \in \wedge_1\) induces 
  an ordered basis of \(W \in \wedge_2\).
\end{definition}

In the cases that \(V = \mathbb{R}^n\), we define \(\wedge^+\) to be the 
orientation induced by the standard ordered basis \(e_1, \cdots, e_n\). This 
is called the positive orientation of \(V\).

We would like to generalize this notion of positive orientation to manifolds. In particular, 
for each \(x \in X\), we would like to define an orientation \(\wedge_x\) of 
\(T_x X\) such that it is compatible with the structure of the manifold on \(X\).

In the case \(X = U \subseteq \mathbb{R}^n\), for all \(x \in U\), we have 
a canonical isomorphism \(T_x U \simeq \mathbb{R}^n\), and so, we define the 
positive orientation \(\wedge_U^+\) on \(U\) to be the collection of orientations 
\(\wedge_x^+\) on \(T_x V\) where \(T_x U \simeq \mathbb{R}^n\) induces the 
positive orientation \(\wedge^+\) on \(\mathbb{R}^n\).

\begin{definition}[Positive Orientation]
  Let \(X\) be an \(n\)-dimensional manifold and let \((U, f)\) be a chart. 
  The positive orientation \(\wedge^+\) on \((U, f)\) is the collection of 
  orientations on \(T_x X\) for all \(x \in U\) such that, considering the 
  positive orientation on \(f(U)\), the isomorphism 
  \[Df\mid_x : T_x U \to T_{f(x)}(f(U))\]
  is orientation preserving.
\end{definition}

\begin{definition}[Orientable]
  A manifold \(X\) is called orientable if there exists an atlas \(\{(U_i, f_i)\}\) 
  of positively oriented charts, such that for \(x \in U_i \cap U_j\), the 
  orientation induced by \((U_i, f_i)\) coincides with the orientation induced 
  by \((U_j, f_j)\).
\end{definition}

Alternatively, we see that \(X\) is orientable if and only if all the transition 
functions have differential with positive determinant.

\begin{definition}[Orientation Preserving]
  A smooth function \(F : X \to Y\) between oriented manifolds is said to be 
  orientation preserving if for all \(x \in X\), the linear map 
  \[DF\mid_x : T_x X \to T_{F(x)}Y\]
  is orientation preserving with respect to the orientations induced on 
  \(T_x X\) and \(T_{F(x)}Y\) respectively.
\end{definition}

With these definitions, we may finally consider integration on manifolds.

Let \(X\) be a manifold. Then for any \(p \ge 0\), we denote \(\Omega^p_c\) the 
set of differential \(p\)-forms with compact support.

\begin{definition}
  Let \(\omega \in \Omega^n_c(X)\) and let \(\text{supp}(\omega) \subseteq U\) 
  where \((U, f)\) is a positively oriented chart of \(X\). Then, 
  \[(f^{-1})^* \omega \in \Omega_c^n(f(U))\]
  and 
  \[\int_x \omega := \int_{f(U)}(f^{-1})^* \omega.\]
\end{definition}

We see that this definition is well-defined, i.e. is independent of the chart 
\((U, f)\). Indeed, if \((V, g)\) is another positively oriented chart containing 
\(\text{supp}(\omega)\), then 
\[\begin{split}
  \int_{g(U \cap V)}(g^{-1})^* \omega & = \int_{f(U \cap V)} (g \circ f^{-1})^*(g^{-1})^* \omega \\
  & = \int_{f(U \cap V)} (f^{-1})^* g^* (g^{-1})^* \omega = \int_{f(U \cap V)} (f^{-1})^* \omega,
\end{split}\]
where the second equality is due to corollary~\ref{change-of-var}.

With this definition in mind, in some sense, we will partition the support of a 
form into parts contained in charts and then define the integral of a form over 
a manifold by glueing these parts together.

\begin{definition}[Partition of Unity]
  Let \(X\) be a manifold and let \(\mathcal{U} = \{U_i\}\) be a open cover of 
  \(X\). A partition of unity with respect to \(\mathcal{U}\) is a collection of 
  smooth functions \(h_i : X \to [0, 1]\) such that 
  \begin{itemize}
    \item \(\text{supp}(h_i) \subseteq U_i\) for all \(i\);
    \item \(\sum_i h_i(x) = 1\) for all \(x \in X\);
    \item for all \(x \in X\), there exists an open neighbourhood \(V\) of \(x\) 
      such that \(\text{supp}(h_i) \cap V \neq 0\) for finitely many \(i\).
  \end{itemize}
  With the third property in mind, we see that the sum in the second property is 
  well-defined as all but finitely many \(h_i(x)\) are zero.
\end{definition}

\begin{proposition}
  If \(X\) is a manifold, then any open cover of \(X\) induces a partition of 
  unity.
\end{proposition}
\begin{proof}
  Omitted. (The idea is to use bump function which are scaled appropriately).
\end{proof}

\subsubsection{Volume Form}

\begin{proposition}
  Let \(X\) be a manifold of dimension \(n\). \(X\) is orientable if and only if there 
  exists a non-vanishing \(n\)-form \(\omega \in \Omega^n(X)\). 
  In this case, \(\omega\) is called a volume form.
\end{proposition}
\begin{proof}
  Suppose \(\omega \in \Omega^n(X)\) is non-vanishing and let \(\{(U_i, f_i)\}\) 
  be any atlas on \(X\). Then, for each \(i\), there exists some 
  \(g_i \in C^\infty(f_i(U_i))\) such that 
  \[(f_i^{-1})^* \omega = g_i dx_1 \wedge \cdots \wedge dx_n.\]
  Since \(\omega\) is non-vanishing, it follows that \(g_i\) is either positive 
  and negative on \(f_i(U_i)\) and so, by possibly replacing \(f_i\) by the 
  composition \(t \circ f_i\) where 
  \[t : \mathbb{R}^n \to \mathbb{R}^n : 
    (x_1, x_2, \cdots, x_n) \mapsto (-x_1, x_2, \cdots, x_n)\]
  we may assume \(g_i\) is positive for all \(i\) (after the replacement).
  Thus, for \(i, j\), if \(x \in U_i \cap U_j\), we see \((U_i, f_i), (U_j, f_j)\) 
  define the same orientation on \(x\) implying \(X\) is orientable.

  On the other hand, if \(X\) is orientable then, we may choose \(\{U_i, f_i\}\) 
  an atlas of positively oriented charts. Let \(h_i : X \to [0, 1]\) be a partition 
  of unity with respect to this atlas and define 
  \[\omega_i = f^*(dx_1 \wedge \cdots \wedge dx_n).\]
  Then, taking \(\tilde \omega_i\) to be the \(n\)-form defined by \(\omega_i\) 
  inside \(U_i\) and zero otherwise, we define \(\omega := \sum_i h_i \tilde \omega_i\).
  Then, for each \(x \in X\) and any positively oriented basis \(v_1, \cdots, v_p\), 
  we have that \(\omega(x)(v_1, \cdots, v_p) > 0\). Thus, \(\omega\) is a volume 
  form on \(X\). 
\end{proof}


\end{document}

