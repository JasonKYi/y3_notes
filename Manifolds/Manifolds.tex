% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames*,x11names*}{xcolor}
%
\documentclass[]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}\pagecolor[RGB]{28,30,38} \color[RGB]{213,216,218}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={Manifolds},
  pdfauthor={Kexing Ying},
  colorlinks=true,
  linkcolor=Maroon,
  filecolor=Maroon,
  citecolor=Blue,
  urlcolor=red,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage[margin = 1.5in]{geometry}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\usepackage{tikz}
\usepackage{physics}
\usepackage{amsthm}
\usepackage{mathtools}
\usepackage[ruled,vlined]{algorithm2e}
\theoremstyle{definition}
\newtheorem{theorem}{Theorem}
\newtheorem{definition*}{Definition}
\newtheorem{prop}{Proposition}
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem*{remark}{Remark}
\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
\newtheorem{lemma}{Lemma}[section]
\newtheorem{proposition}{Proposition}[section]
\newtheorem{example}{Example}[section]
\newcommand{\diag}{\mathop{\mathrm{diag}}}
\newcommand{\Arg}{\mathop{\mathrm{Arg}}}
\newcommand{\hess}{\mathop{\mathrm{Hess}}}
% the redefinition for the missing \setminus must be delayed
\AtBeginDocument{\renewcommand{\setminus}{\mathbin{\backslash}}}

\title{Manifolds}
\author{Kexing Ying}
\date{July 24, 2021}

\begin{document}
\maketitle

{
\hypersetup{linkcolor=}
\setcounter{tocdepth}{2}
\tableofcontents
}
\newpage

\section{Introduction}

This module introduces the notion of manifolds and provides the infrastructure 
for generalizing theorems from calculus to manifolds. In particular, we will 
talk about 
\begin{itemize}
  \item Smooth manifolds and smooth functions;
  \item Tangent spaces and vector fields;
  \item Differential forms, integrations and Stoke's theorem.
\end{itemize}
In contrast to the curves and spaces module, instead of working on Euclidean spaces, 
we will define these notions for general manifolds. Thus, many definitions 
such as the tangent space will be defined in a more intrinsic point of view, without 
requiring our manifold to be within a Euclidean space.

Furthermore, a goal of this module is to differentiate between different manifolds, 
that is determine whether or not two manifolds are diffeomorphic with one another. 
This is achieved through introducing invariants such as the notion of differential 
forms and these notions will appear in many other places especially in geometry.

Manifolds is the subject of studying geometric shapes, and in mathematics, there 
are in general two ways of doing this. The first of which is by embedding the 
object into an ambient space such as \(\mathbb{R}^2\) or \(\mathbb{R}^3\). An 
example of this is studying the unit circle through the parametrisation 
\[\{(x, y) \mid x^2 + y^2 = 1\} \subseteq \mathbb{R}^2,\]
and is the more common method of what we have done thus far. On the other hand, 
one may study the object independently of the ambient space. This is the approach 
we shall take throughout this course. In particular, we will study spaces 
which at a local level ``looks like'' a Euclidean space directly without embedding 
the structure into \(\mathbb{R}^n\).

\newpage
\section{Topological and Smooth Manifolds}

Let us first recall some notions from topology.

\begin{definition}
  Let \(X, Y\) be topological spaces and let \(f : X \to Y\) be a function,
  then 
  \begin{itemize}
    \item \(f\) is continuous if \(f^{-1}(U)\) is open in \(X\) for all \(U\) open 
      in \(Y\).
    \item \(f\) is a homeomorphism if it is continuous and has a continuous inverse.
  \end{itemize}
\end{definition}

\begin{definition}
  A topological space \(X\) is 
  \begin{itemize}
    \item Hausdorff if for all \(x, y \in X\), \(x \neq y\), there exists open 
      sets \(U, V\) in \(X\) such that \(x \in U, y \in V\) and 
      \(U \cap V = \varnothing\).
    \item second-countable if there exists countable 
      \(\mathcal{F} \subseteq \mathcal{T}_X\) such that any open set in \(X\) 
      can be written as a union of elements of \(\mathcal{F}\), i.e. 
      \(\mathcal{F}\) is a countable basis of \(X\).
  \end{itemize}
\end{definition}

In general, in this module, we will assume our topology is Hausdorff and 
second-countable in order to avoid pathological examples in smooth and 
topological manifolds. 

\begin{definition}[Co-ordinate Chart]
  Let \(X\) be a topological space. A co-ordinate chart on \(X\) is 
  the collection of
  \begin{itemize}
    \item an open set \(U \subseteq X\),
    \item an open set \(\tilde U \subseteq \mathbb{R}^n\) for some \(n \ge 0\), 
    \item a homeomorphism \(f : U \to \tilde U\).
  \end{itemize}
  We denote a co-ordinate chart by \((U, f)\).
\end{definition}

\begin{definition}
  Let \(X\) be a (Hausdorff and second-countable) topological space. We say 
  that \(X\) is a topological manifold of dimension \(n\) if for all 
  \(x \in X\), there exists a co-ordinate chart \((U, f)\) with 
  \(\tilde U \subseteq \mathbb{R}^n\) such that \(x \in U\).
\end{definition}

The classical example of a topological manifold is the circle, in particular 
\[S^1 := \{(x, y) \mid x^2 + y^2 = 1\} \subseteq \mathbb{R}^2,\]
is a 1 dimensional topological manifold. Consider \(U_1 = S^1 \setminus \{(0, -1)\}\),
and we define the stereographic projection \(f_1 : U_1 \to \mathbb{R}\), 
\[f : (x, y) \mapsto \frac{x}{y + 1} := \tilde x.\]
It is not difficult to see that \(f_1\) is invertible with the inverse 
\[f_1^{-1} : \tilde x \mapsto \left(\frac{2\tilde x}{1 + {\tilde x}^2}, 
  \frac{1 - {\tilde x}^2}{1 + {\tilde x}^2}\right).\]
Furthermore, as \(f_1\) and \(f^{-1}\) are continuous, we have \((U_1, f_1)\) is 
a co-ordinate chart. Similarly, we define \(U_2 = S^1 \setminus \{(0, 1)\}\), 
and we my show the existence of a homeomorphism \(f_2 : U_2 \to \mathbb{R}\), 
providing the second co-ordinate chart \((U_2, f_2)\). Thus, as 
\(S^1 = U_1 \cup U_2\), we have \(S^1\) is a 1 dimensional topological manifold.

The above example can be expanded to \(n\)-dimensional sphere 
\[S^n := \{(x_0, \cdots, x_n) \mid x_0^2 + \cdots + x_n^2 = 1\} 
  \subseteq \mathbb{R}^n.\]
Similarly as before, we can construct two co-ordinate charts covering all points 
on the sphere except for the poles allowing us to conclude \(S^n\) is a 
\(n\)-dimensional topological manifold.

\begin{definition}[Transition Function]
  Let \(X\) be a topological manifold and let \((U_1, f_1)\) and \((U_2, f_2)\) 
  be two co-ordinate charts on \(X\) such that \(U_1 \cap U_2 \neq \varnothing\). 
  Then the transition function between these two co-ordinate charts is the 
  function 
  \[\phi_{21} := f_2 \circ f_1^{-1} : f_1(U_1 \cap U_2) \to f_2(U_1 \cap U_2).\]
\end{definition}

Let \(X\) be a topological manifold with co-ordinate charts \((U_i, f_i)\) for 
\(i = 1, 2, 3\) such that \(U_1 \cap U_2 \cap U_3 \neq \varnothing\). Then it 
is clear that \(\phi_{21} := f_2 \circ f_1^{-1}\) is a homeomorphism with 
the inverse \(\phi_{12} := f_1 \circ f_2^{-1}\). Furthermore, by considering 
\(\phi_{31} := f_3 \circ f_1^{-1}\) we observe 
\[\phi_{31} = (f_3 \circ f_2^{-1}) \circ (f_2 \circ f_1^{-1}) = 
  \phi_{32} \circ \phi_{21}.\]
This is known as the cocycle property and explains the subscript notation.

\begin{definition}[Atlas]
  Let \(X\) be a topological manifold. An atlas for \(X\) is the collection of
  co-ordinate charst \(\{(U_i, f_i)\}_{i \in I}\) such that 
  \[\bigcup_{i \in I} U_i = X.\]
\end{definition}

We note that we do not require the index set \(I\) to be finite. 
Although, since \(\{U_i\}_{i \in I}\) is an open cover, if \(X\) is compact, 
it is possible to obtain a finite sub-cover, and hence a finite atlas. Nonetheless, 
since we assumed \(X\) is second-countable, we can always choose \(I\) to be 
countable.

\subsection{Smooth Manifolds}

So far, we have only considered ourselves with the topological structure. As 
we would like to do calculus on our manifolds, we will now equip our manifolds 
with the property of smoothness. Recall the following definition for Euclidean 
spaces. 

\begin{definition}
  A function \(F : \mathbb{R}^n \to \mathbb{R}^n\) is smooth (or \(C^\infty\)) 
  if all the partial derivatives of \(F\) of any order exists.
\end{definition}

Of course, this is technically a property not a definition though it will suffice 
for our purposes.

\begin{definition}[Smooth Atlas]
  Let \(X\) be a topological manifold of dimension \(n\). Then an atlas 
  \(\{(U_i, f_i)\}_{i \in I}\) on \(X\) is smooth if for all \(i, j \in I\),
  the transition function 
  \[\phi_{ij} : f_j(U_i \cap U_j) \subseteq \mathbb{R}^n \to 
    f_i(U_i \cap U_j) \subseteq \mathbb{R}^n\]
  is smooth.
\end{definition}

Since \(\phi_{ij}\) is a (bijective) map between open subsets of Euclidean 
spaces, it makes sense to ask whether or not \(\phi_{ij}\) is smooth.

\begin{definition}[Diffeomorphism]
  Let \(U, V \subseteq \mathbb{R}^n\) be open sets and let \(f : U \to V\). 
  Then \(f\) is a diffeomorphism if \(f\) is smooth and has a smooth inverse.
\end{definition}

As \((\phi_{ij})^{-1} = \phi_{ji}\), and both \(\phi_{ij}\) and \(\phi_{ji}\) 
are smooth, the transition functions of any smooth manifold are diffeomorphisms.

\begin{definition}[Compatible]
  Let \(X\) be a topological manifold and let \(\mathcal{A} := \{(U_i, f_i)\}\) 
  be a smooth atlas. Let \((U, f)\) be any co-ordinate chart on \(X\), then 
  \((U, f)\) is compatible with the atlas \(\mathcal{A}\) if the transition 
  function between \((U, f)\) and any chart in \(\mathcal{A}\) is a 
  diffeomorphism.
\end{definition}

Clearly, any chart in a smooth atlas is compatible with that atlas, and if 
\((U, f)\) is compatible with the smooth atlas \(\mathcal{A}\), then 
\((U, f) \cup \mathcal{A}\) is also a smooth atlas.

\begin{definition}
  Let \(X\) be a topological manifold and \(\mathcal{A}, \mathcal{B}\) be 
  two atlases on \(X\). Then \(\mathcal{A}\) is compatible with \(\mathcal{B}\) 
  if every chart in \(\mathcal{B}\) is compatible with \(\mathcal{A}\).
\end{definition}

Similarly as before, if \(\mathcal{A}, \mathcal{B}\) are compatible, then 
\(\mathcal{A} \cup \mathcal{B}\) is a smooth atlas on \(X\).

\begin{lemma}
  Let \(X\) be a topological manifold and let 
  \[\mathcal{A} := \{(U_i, f_i)\}_{i \in I}, 
    \mathcal{B} := \{(U_j, f_j)\}_{j \in J},\]
  be two compatible smooth atlases on \(X\). Then for all \((U, f)\) co-ordinate 
  charts compatible with \(\mathcal{A}\), \((U, f)\) is compatible with 
  \(\mathcal{B}\).
\end{lemma}
\begin{proof}
  It suffices to show that for all \((U_j, f_j) \in \mathcal{B}\), 
  \(U \cap U_j \neq \varnothing\), the transition map 
  \[\phi := f_j \circ f^{-1} : f(U \cap U_j) \to f_j(U \cap U_j)\]
  and its inverse are smooth. 

  Let \(y \in f(U \cap U_j)\), then there exist some \(x \in U \cap U_j\) such 
  that \(f(x) = y\). As \(\mathcal{A}\) is an atlas, it contains a co-ordinate 
  chart \((U_i, f_i) \in \mathcal{A}\) such that \(x \in U_i\). Then, defining 
  \(W := U \cap U_i \cap U_j \neq \varnothing\), we have the homomorphisms 
  \(f : W \to f(W), f_i : W \to f_i(W)\) and \(f_j : W \to f_j(W)\). As 
  remarked before, we have 
  \[\phi = (f^{-1} \circ f_i) \circ (f_i^{-1} \circ f_j)\]
  on \(W\). Now, by compatibility, the right hand side is smooth, and so 
  we have \(\phi\) is smooth on \(W\) implying it is smooth at \(y\). Thus, 
  as \(y \in f(U \cap U_j)\) was arbitrary, \(\phi\) is smooth (by a similar 
  argument \(\phi^{-1}\) is also smooth) and \((U, f)\) is compatible with 
  \(\mathcal{B}\).
\end{proof}

With this lemma it is easy to see that compatibility defines an equivalence 
relation on the set of smooth atlases and with this we can define smooth 
manifolds.

\begin{definition}[Smooth Manifold]
  A smooth manifold is a topological manifold with an equivalence class 
  \([\mathcal{A}]\) of compatible smooth atlases on \(X\). The equivalence 
  class of atlases is called a smooth structure on \(X\).
\end{definition}

The reason for the definition considering only the equivalence class 
of compatible smooth atlases is because we do not want to distinguish between 
compatible smooth atlases. Indeed, recalling our example of a sphere, 
we would like to not consider the atlases which projects the sphere with 
respect to two other points that are not the poles as an alternative manifold.

From this point forward, we will always work with smooth manifolds and thus, 
omit the word ``smooth'' whenever it is clear from the context, i.e. a manifold 
is a smooth manifold and a atlas is a smooth atlas. 

\subsection{Submanifolds}

\begin{definition}[Affine Subspace]
  An affine subspace \(A \subseteq \mathbb{R}^n\) is a translation of a 
  linear subspace of \(\mathbb{R}^n\), i.e. there exists some \(v \in V\) and 
  \(W \le \mathbb{R}^n\) such that 
  \[A := v + W = \{v + w \mid w \in W\}.\]
\end{definition}

\begin{definition}[Submanifold]
  Let \(X\) be an \(n\)-dimensional manifold and let \(Y \subseteq X\). Then 
  \(Y\) is an \(m\)-dimensional submanifold of \(X\) if for all \(y \in Y\), 
  there exists a 
  \begin{itemize}
    \item a co-ordinate chart \((U, f)\) of \(X\) which is compatible with 
      the smooth structure of \(X\) such that \(y \in U\) and,
    \item an \(m\)-dimensional affine subspace \(A \subseteq \mathbb{R}^n\) 
      \[f(U \cap Y) = f(U) \cap A.\]
  \end{itemize}
\end{definition}

\begin{proposition}
  Let \(X\) be an \(n\)-dimensional manifold and \(Y\) an \(m\)-dimensional 
  submanifold of \(X\), then \(Y\) is an \(m\)-dimensional manifold.
\end{proposition}
\begin{proof}
  As \(Y\) is a topological subspace of \(X\), it is Hausdorff and 
  second-countable. Thus, it remains to show that \(Y\) is equipped with a 
  smooth structure. 

  By linear algebra, it is easy to see that the linear map 
  \(\tau : A = v + W \to W : a \mapsto a - v\) is continuously invertible, and thus, 
  for all \(y \in Y\) there exists a chart \((U, f' := \tau \circ f)\) of \(X\) 
  such that \(y \in U\) and \(f'(U \cap Y) = f'(U) \cap W\). 
  Let \(T : W \cong \mathbb{R}^m\), then defining the atlas 
  \[\{(U_y, \tilde f_y)\}_{y \in Y} := \{(U_y, T \circ f')\}_{y \in Y},\]
  for all \(a, b \in Y\), its transition map 
  \[\phi_{ab} = (T \circ \tau \circ f_b) \circ (T \circ \tau \circ f_a)^{-1}
    = T \circ \tau \circ (f_b \circ f_a^{-1}) \circ \tau^{-1} \circ T^{-1},\]
  is a composition of smooth functions, and thus is smooth. Hence \(Y\) is 
  a smooth manifold.
\end{proof}

Let \(f : \mathbb{R} \to \mathbb{R}\) be smooth, then 
define the set \(s_f := \{(x, y) \mid y = f(x)\} \subseteq \mathbb{R}^2\) and 
I claim that \(s_f\) is a submanifold of \(\mathbb{R}^2\). Define the chart 
\((U, g)\) on \(\mathbb{R}^2\) where \(U = \mathbb{R}^2\) and 
\[g(x, y) = (x, y - f(x)).\]
It is clear that \(g : \mathbb{R}^2 \to \mathbb{R}^2\) is a diffeomorphism as it 
is invertible with the inverse \(g^{-1}(x, y) = (x, y + f(x))\) and so, 
\(\{(U, g)\}\) is a smooth atlas of \(\mathbb{R}^2\). Now considering 
\(g\mid_{s_f} : s_f \to g(s_f) : (x, f(x)) \mapsto (x, 0)\) we have \(s_f\) is 
a smooth submanifold of \(\mathbb{R}^2\).

Let us recall the following proposition from year-two analysis.

\begin{proposition}[Inverse Function Theorem]
  Let \(U \subseteq \mathbb{R}^n\) be an open subset and let 
  \(F : U \to \mathbb{R}^n\) be smooth. Let \(x \in U\) such that the Jacobian 
  as \(x\), \(DF\mid_x : \mathbb{R}^n \to \mathbb{R}^n\) is an isomorphism, 
  then there exists an open neighbourhood \(V \subseteq U\) of \(x\) such that 
  \(F \mid_V : V \to F(V) \subseteq \mathbb{R}^n\) is a diffeomorphism.
\end{proposition}

\begin{corollary}
  A smooth, bijective function \(F : U \subseteq \mathbb{R}^n \to \mathbb{R}^n\) 
  which has non-zero Jacobian everywhere has a smooth inverse.
\end{corollary}

The inverse function theorem is useful for showing whether a subset of a manifold 
is a submanifold. Consider the circle \(S_1 := \{x^2 + y^2 = 1\}\) as a subset 
of the manifold \(\mathbb{R}^2\). Then, let 
\[U = \mathbb{R}^2 \setminus \{(x, 0) \mid x \le 0\} \text{ and } 
  f : U \to \mathbb{R}^2 : (r\cos \theta, r\sin \theta) \mapsto (r, \theta).\]
As \(f : U \to f(U)\) is smooth, bijective and has non-zero Jacobian on \(U\), 
then \(f^{-1} : f(U) \to U\) is also smooth. Thus, \((U, f)\) is a smooth chart 
on \(U \to \tilde U := \mathbb{R}^+ \times (-\pi, \pi) \subseteq \mathbb{R}^2\). 
Then, for all \((\cos \theta, \sin \theta) \in S_1 \setminus \{(-1, 0)\}\), 
we have \(f(\cos \theta, \sin \theta) = (1, \theta)\) implying 
\[f(U \cap S_1) = \{(1, \theta) \mid \theta \in (-\pi, \pi)\} = 
  f(U) \cap A,\]
where \(A\) is the affine subspace \((1, 0) + \{(0, y) \mid y \in \mathbb{R}\}\).
Hence \(S_1\) is a submanifold of \(\mathbb{R}^2\).

\begin{definition}[Level Sets]
  Let \(h : \mathbb{R}^n \to \mathbb{R}^k\) be a function and let 
  \(\alpha \in \mathbb{R}^k\). Then the level set of \(h\) at \(\alpha\) is 
  \[h^{-1}(\{\alpha\}) = 
    \{x \in \mathbb{R}^n \mid h(x)= \alpha\} \subseteq \mathbb{R}^n.\]
\end{definition}

\begin{definition}[Regular Points and Values]
  Let \(h : \mathbb{R}^n \to \mathbb{R}^k\) be a smooth function. A point 
  \(x \in \mathbb{R}^n\) is called a regular point of \(h\) if the Jacobian of 
  \(h\) at \(x\) 
  \[Dh\mid_x : \mathbb{R}^n \to \mathbb{R}^k\]
  is surjective.

  \(\alpha \in \mathbb{R}^k\) is called a regular value if every point of 
  the \(\alpha\)-level set \(h^{-1}(\{\alpha\})\) is regular.

  If \(x \in \mathbb{R}^n\) is not a regular point, then it is called a critical 
  point. Similarly, if \(\alpha \in \mathbb{R}^k\) is not a regular value, 
  then it is called a critical value. 
\end{definition}

\begin{definition}[Standard Projection]
  Let \(k \le n\). The standard projection is the morphism 
  \[\pi : \mathbb{R}^n \to \mathbb{R}^k : (x_1, \cdots, x_n) \mapsto 
    (x_{n-k+1}, \cdots, x_n).\]
  That is \(\pi\) forgets the first \(n-k\) entries.
\end{definition}

Level sets are a useful tool for constructing submanifolds.

\begin{theorem}[Implicit Function theorem]
  Let \(U \subseteq \mathbb{R}^n\) be an open subset and let 
  \(h : U \to \mathbb{R}^k\) be a smooth function where \(k \le n\). Let 
  \(z \in U\) be a regular point of \(h\). Then there exists an open 
  neighbourhood \(V \subseteq U\) of \(z\) and a diffeomorphism 
  \[f : V \to f(V) \subseteq \mathbb{R}^n \text{ s.t. } 
    h \circ f^{-1} = \pi : f(V) \to \mathbb{R}^k.\]
\end{theorem}

Informally, this theorem states that a smooth function around a regular point 
looks like the standard projection.

\begin{proof}
  Let \(x_1, \cdots, x_n\) be co-ordinates on \(\mathbb{R}^n\) and let 
  us write 
  \[h(x) = (h_1(x), \cdots, h_k(x)).\] 
  As \(z\) is regular, we have \(Dh\mid_z : \mathbb{R}^n \to \mathbb{R}^k\) is 
  surjective and thus, possibly by reordering, the set 
  \[\left\{\pdv{h(z)}{x_{n-k+1}}, \cdots, \pdv{h(z)}{x_n}\right\}\]
  form a basis of \(\mathbb{R}^k\) and the matrix 
  \[M := \begin{pmatrix}
    \pdv{h_1(z)}{x_{n-k+1}} & \cdots & \pdv{h_1(z)}{x_n} \\
    \vdots & & \vdots \\
    \pdv{h_k(z)}{x_{n-k+1}} & \cdots & \pdv{h_k(z)}{x_n}
  \end{pmatrix}\]
  is invertible. Then, by defining 
  \[f : U \to f(U) : (x^1, \cdots, x^n) \mapsto 
    (x^1, \cdots, x^{n - k}, h_1(x), \cdots, h_k(x)),\]
  we have, 
  \[Df\mid_z = 
  \left(\begin{array}{c|c}
    I_{n - k} & 0\\
    \hline
    \star & M
  \end{array}\right)\]
  which is invertible as \(\det Df\mid_z = \det I_{n-k} \det M = \det M \neq 0\).
  Thus, by the inverse function theorem, there exists some open \(V \subseteq U\) 
  such that \(f : V \to f(V)\) is a diffeomorphism. Then, by considering 
  \(\pi \circ f = h\), we have \(\pi = h \circ f^{-1}\).
\end{proof}

\begin{corollary}
  If \(h : \mathbb{R}^n \to \mathbb{R}^k\) is a smooth function, and \(\alpha\) 
  is a regular value, then the level set of \(h\) at \(\alpha\) is a submanifold 
  of \(\mathbb{R}^n\) of dimension \(n - k\).
\end{corollary}
\begin{proof}
  For all \(z \in h^{-1}(\{\alpha\})\), we have \(z\) is a regular point. Thus, 
  by the above theorem, there exists an open neighbourhood \(V\) of \(z\) and a 
  diffeomorphism \(f : V \to f(V)\) such that \(h \circ f^{-1} = \pi\). Then, 
  \[f(h^{-1}(\{\alpha\}) \cap V) = f(h^{-1}(\{\alpha\})) \cap f(V) = 
    \pi^{-1}(\{\alpha\}) \cap f(V).\]
  Hence, as \(\pi^{-1}(\{\alpha\}) = 
  \{(x_1, \cdots, x_{n - k}, \alpha_1, \cdots, \alpha_k)\} = \alpha + A_{n - k}\),
  we have \(h^{-1}(\{\alpha\})\) is a submanifold of dimension \(n - k\).
\end{proof}

This corollary is extremely useful. Consider the sphere 
\(S^n = \{x_0^2 + \cdots + x_n^2 = \alpha\}\), by defining 
\(h : \mathbb{R}^n \to \mathbb{R} : (x_0, \cdots, x_n) \mapsto 
x_0^2 + \cdots + x_n^2\), we see that \(h\) is smooth with the the Jacobian 
\[Dh\mid_x = (2x_0, \cdots, 2x_n).\]
Thus, \(\alpha\) is a regular value of \(h\) for all \(\alpha > 0\). Hence, 
\(S^n = \{h(x) = \alpha\}\) is a submanifold of \(\mathbb{R}^{n+1}\) for 
all \(\alpha > 0\).

\begin{theorem}[Sard's Theorem]
  Let \(h : \mathbb{R}^n \to \mathbb{R}^k\) be a smooth function. Then the set 
  of regular values \(Z \subseteq \mathbb{R}^k\) is dense. Furthermore, 
  \(\mathbb{R}^k \setminus Z\) has Lebesgue measure zero.
\end{theorem}

\subsection{Smooth Functions}

We know what a smooth function between two Euclidean spaces is. We will extend 
this notion to functions between two manifolds. 

\begin{definition}
  Let \(X\) be a manifold and let \(h : X \to \mathbb{R}\) be a function. Then 
  \(h\) is said to be smooth at \(x \in X\) if for any chart \((U, f)\) containing 
  \(x\) such that it is compatible with the smooth structure of \(X\), the 
  function 
  \[h \circ f^{-1} : f(U) \to \mathbb{R}\]
  is smooth at the point \(f(x)\).

  We say \(h\) is smooth if it is smooth at all points in \(X\).
\end{definition}

It is not difficult to see that smoothness is independent of the chart we 
pick, i.e. \(h\) is smooth at \(x\) as long as there exists a compatible chart 
\((U, f)\) containing \(x\) such that \(h \circ f^{-1}\) is smooth at \(x\).

\begin{proposition}
  Let \(X\) be a manifold and let \(h : X \to \mathbb{R}\) be a function. Then, 
  if \((U_1, f_1), (U_2, f_2)\) are two compatible charts on \(X\) such that 
  \(x \in U_1 \cap U_2\), \(h \circ f_1^{-1}\) is smooth at \(x\) if and only if 
  \(h \circ f_2^{-1}\) is smooth at \(x\).
\end{proposition}
\begin{proof}
  Since the two charts are compatible the transition function 
  \(\phi_{12} = f_1 \circ f_2^{-1}\) is smooth. Thus, if \(h \circ f_1^{-1}\) 
  is smooth at \(f_1(x)\), so is 
  \[h \circ f_1^{-1} \circ \phi_{12} = h \circ f_1^{-1} \circ f_1 \circ f_2^{-1} 
    = h \circ f_2^{-1}.\]
  Similar argument for the other direction.
\end{proof}

Thus, to show that \(h\) is smooth at some \(x\), it suffices to find a compatible 
chart \((U, f)\) at \(x\) such that \(h \circ f^{-1}\) is smooth at \(f(x)\).

\begin{definition}[Smooth]
  Let \(X, Y\) be manifolds of dimension \(n\) and \(m\). Then a function 
  \(H : X \to Y\) is smooth at \(x \in X\) if there exists a chart 
  \((U, f)\) compatible with the smooth structure of \(X\) such that \(x \in U\) 
  and a chart \((V, g)\) compatible with the smooth structure of \(Y\) such that 
  \(H(x) \in V\) and \(H(U) \subseteq V\) and
  \[g \circ H \circ f^{-1} : f(U) \subseteq \mathbb{R}^n \to g(V) 
    \subseteq \mathbb{R}^m\]
  is smooth at \(f(x)\).

  We say \(H\) is smooth if it is smooth at all points in \(X\).
\end{definition}

In the case that \(H\) is a continuous function, we see that the condition of 
\(H(U) \subseteq V\) can be relaxed by considering the chart on \(X\), 
\((U \cap H^{-1}(V), f)\) in which \(U \cap H^{-1}(V) \subseteq V\) is open 
by the continuity of \(H\).

\begin{definition}[Diffeomorphism]
  A function \(H : X \to Y\) between manifolds is said to be a diffeomorphism 
  if it is smooth, a bijection, and \(H^{-1}\) is smooth.
\end{definition}

Similar to before, the definition of smoothness is independent of the choice 
of the charts (consider \(\phi^Y_{21} \circ g_1 \circ h \circ f_1 \circ \phi^X_{12}\)).

\begin{proposition}
  Let \(Y \subseteq X\) be a submanifold of \(X\) and let 
  \[\iota_Y : Y \hookrightarrow X\]
  be the inclusion map from \(Y\) to \(X\). Then \(\iota_Y\) is smooth.
\end{proposition}
\begin{proof}
  Let \(y \in Y\), then by definition, there exists a chart \((V, g)\) on 
  \(X\) containing \(y\) such that \(g(V \cap Y) = g(V) \cap A\) for some 
  \(A\) an affine space. Then defining \(U = V \cap Y\) and \(f = g\mid_U\), 
  we have \((U, f)\) is a chart on \(Y\) and \(g \circ \iota_Y \circ f^{-1}\) 
  is the identity on \(f(U)\). Thus \(\iota_Y\) is smooth.
\end{proof}

\begin{proposition}
  Let \(X, Y, Z\) be manifolds and let \(H : X \to Y\) and \(G : Y \to Z\) be
  smooth, then \(G \circ H\) is also smooth.
\end{proposition}
\begin{proof}
  Follows by considering 
  \[g \circ G \circ f_1^{-1} \circ \phi_{12} \circ f_2 \circ H \circ h = 
    g \circ (G \circ H) \circ h,\]
  for some appropriately chosen charts which is restricted whenever necessary. 
\end{proof}

From the two propositions above, we see that the restriction of any smooth 
maps on a submanifold is smooth as \(F\mid_Y = F \circ \iota_Y\). In particular, 
we have that any smooth maps between Euclidean spaces restricted on some 
submanifolds of that Euclidean space is smooth (e.g. any smooth map restricted 
on the \(n\)-sphere is smooth).

\begin{definition}[Product Manifold]
  Given \(X, Y\) manifolds of dimension \(n\) and \(m\). Then the Cartesian 
  product \(X \times Y\) is a manifold of dimension \(n + m\).
\end{definition}

To see why this is a topological manifold, consider for all 
\((x, y) \in X \times Y\) we may choose a chart \((U, f)\) on \(X\) such that \(x \in U\) and a chart 
\((V, g)\) in \(Y\) such that \(y \in V\). Then, if we define 
\(W := U \times V\) and \(h : W \to h(W) \subseteq \mathbb{R}^{n + m} := 
(x, y) \mapsto (f(x), g(y))\), we have \((W, h)\) is a chart of \(X \times Y\) 
containing \((x, y)\). Similarly, using the same construction, if \(X, Y\) are 
smooth, one may show that \(X \times Y\) is also smooth.

\begin{definition}[Lie Group]
  A Lie group is a manifold \(G\) which has a group structure \((G, \cdot)\) 
  such that the multiplication and the inverse are both smooth.
\end{definition}

An important example of a Lie group is the general linear group. In particular, 
as the space \(M_n(\mathbb{R})\) of all \(n \times n\) matrices of real 
coefficients is a vector space of dimension \(n^2\), it is an \(n^2\)-dimensional 
manifold. Now, as \(GL_n(\mathbb{R})\) is an open subset of \(M_n(\mathbb{R})\), 
it follows that it is also an \(n^2\)-dimensional manifold. Now, as 
\(GL_n(\mathbb{R})\) is a group equipped with matrix multiplication, one may 
show that it is a Lie group by checking that the multiplication and the inverse 
are smooth.

\subsubsection{Rank of a Smooth Function}

For linear maps between Euclidean spaces, we have a notion of a rank by considering 
the dimension of the image of that map. Similarly, for smooth functions between 
Euclidean spaces, its rank is defined by considering the rank of its derivative.
We will in this section extend this notion for smooth functions between manifolds.

\begin{definition}[Rank]
  Let \(X, Y\) be manifolds of dimension \(n\) and \(k\), and let \(H : X \to Y\) 
  be a smooth function. Let \(x \in X\) and let \((U, f)\) be a chart on \(X\) 
  such that \(x \in U\), and \((V, g)\) be a chart on \(Y\) at \(H(x)\) such 
  that \(H(U) \subseteq V\). Then, we may define 
  \[\tilde H := g \circ H \circ f^{-1} : f(U) \to g(V).\]
  As \(\tilde H\) is a smooth function between Euclidean spaces, it has 
  a Jacobian at \(f(x)\), 
  \[D \tilde H \mid_{f(x)} : \mathbb{R}^n \to \mathbb{R}^k.\]  
  Then the rank of \(H\) at \(x\) is simply the rank of \(D \tilde H \mid_{f(x)}\).
\end{definition}

It is clear that the rank of a smooth function at a point is independent of the 
choice of the chart as the transition functions are diffeomorphisms. In particular, 
if \(\tilde H\) and \(\tilde H'\) results from two different choices of charts, we 
have \(\tilde H' = \psi^{-1} \circ \tilde H \circ \phi\) where \(\psi\) and 
\(\phi\) are appropriate transition maps. Then, by the chain rule, we have 
\[D \tilde H' \mid_{f'(x)} = D\psi^{-1} \mid_{g(H(x))} \circ D 
  \tilde H\mid_{f(x)} \circ D \phi\mid_{f'(x)}.\]
Now, as \(\phi, \psi\) are diffeomorphisms, both \(D\psi^{-1} \mid_{g(H(x))}\) 
and \(D \phi\mid_{f'(x)}\) are invertible, and hence, the rank of 
\(D \tilde H' \mid_{f'(x)}\) is the same as \(D \tilde H \mid_{f(x)}\).

\begin{definition}[Regular]
  Let \(X, Y\) be manifolds of dimension \(n\) and \(k\), and let \(F : X \to Y\) 
  be a smooth function. Then \(x \in X\) is said to be a regular point if the 
  rank of \(F\) at \(x\) is \(k\). If \(x\) is not regular, then it is 
  called a critical point.

  Furthermore, \(y\in Y\) is called a regular value if every point 
  \(x \in F^{-1}(y)\) is regular. Otherwise, it is called a critical value.
\end{definition}

\begin{lemma}
  Let \(X, Y\) be manifolds of dimension \(n\) and \(k\), and let \(F : X \to Y\)
  be a smooth function. Let \(y \in Y\) be a regular value of \(F\). Then 
  the level set 
  \[Z_y := F^{-1}(y) \subseteq X\]
  is a submanifold of \(X\) of dimension \(n - k\).
\end{lemma}
\begin{proof}
  Let \(x \in Z_y\), then there exists a chart \((U, f)\) on \(X\) containing 
  \(x\) and a chart \((V, g)\) on \(Y\) containing \(F(U)\). Then we have the 
  smooth function 
  \[\tilde F := g \circ F \circ f^{-1} : f(U) \to g(V).\]
  Then by construction, we have \(\tilde F^{-1}(g(y)) = f(Z_y \cap U)\). Now, 
  since \(y\) is a regular value of \(F\), \(x\) is a regular point of \(F\), and 
  so \(f(x)\) is a regular point of \(\tilde F\). Then, as \(x \in Z_y \cap U\) 
  was chosen arbitrarily, \(\tilde F^{-1}(g(y))\) is a regular set (by choosing the 
  same chart for all \(x \in \tilde F^{-1}(g(y))\)). Thus, the set 
  \(\tilde F^{-1}(g(y))\) is a submanifold of \(\mathbb{R}^n\), and by definition, 
  there exists a chart \((W, h)\) containing \(f(x)\) such that 
  \[h(\tilde F^{-1}(g(y))) = h(W) \cap A,\]
  for some affine subspace \(A\). Hence, it follows \((f^{-1}(W), h \circ f)\) is 
  a co-ordinate chart on \(X\) such that 
  \[h \circ f(f^{-1}(W) \cap Z_y) = h \circ f(f^{-1}(W)) \cap A.\]
\end{proof}

\subsubsection{Immersion and Submersion}

\begin{definition}
  Let \(X, Y\) be manifolds of dimension \(n\) and \(k\), and let \(F : X \to Y\) 
  be a smooth function. Then \(F\) is said to be a submersion if the rank of 
  \(F\) at any \(x \in X\) is \(k\). Furthermore, \(F\) is said to be an 
  immersion if the rank of \(F\) at any \(x \in X\) is \(n\).
\end{definition}

Thus, \(F\) is a submersion if its Jacobian at any point \(x\) is surjective. 
Similarly, \(F\) is a immersion of its Jacobian at any point \(x\) is injective.

\begin{lemma}
  Let \(Y \subseteq X\) be a \(m\)-dimensional submanifold, then the inclusion 
  map 
  \[\iota : Y \hookrightarrow X\]
  is an immersion.
\end{lemma}
\begin{proof}
  By the definition of a submanifold, for all \(y \in Y\), there exists 
  some chart \((V, g)\) of \(X\) containing \(y\) such that 
  \[g(V \cap Y) = g(Y) \cap A,\]
  for some affine subspace \(A\). Then, restricting the chart on to \(Y\), 
  we have \((V \cap Y, g\mid_Y)\) is a chart on \(Y\) containing \(y\). Thus, 
  \[\tilde \iota := g \circ \iota \circ g\mid_Y^{-1} = \text{Id}_{g(V \cap Y)}.\]
  Hence, as \(D \tilde \iota\mid_{g(y)} = D \text{Id}_{g(V \cap Y)}\mid_{g(y)}\) has 
  dimension \(m\), \(\iota\) is a immersion.
\end{proof}

\begin{proposition}
  Let \(X, Y\) be \(n\)-dimensional manifolds, and let \(F : X \to Y\) be a 
  function which is smooth, bijective and of rank \(n\) at any point \(x \in X\). 
  Then \(F\) is a diffeomorphism.
\end{proposition}
\begin{proof}
  It suffices to show that \(F^{-1}\) is smooth. For all \(y \in Y\), let 
  \((U, f)\) be a chart of \(F^{-1}(y)\) on \(X\) and \((V, g)\) be a chart of 
  \(Y\) containing \(f(U)\). Then, by definition, 
  \[\tilde F := g \circ F \circ f^{-1} : f(U) \to g(V)\]
  is smooth with invertible derivative \(D \tilde F\mid_{f(F^{-1}(y))}\). 
  By the inverse function theorem, \(\tilde F^{-1} = f \circ F^{-1} \circ g^{-1}\) 
  is locally smooth at \(g^{-1}(y)\) with derivative 
  \(D F^{-1}\mid_{g(y)} = D \tilde F\mid_{f(F^{-1}(y))}^{-1}\). Thus, as 
  \(y \in Y\) was chosen arbitrarily, \(F^{-1}\) is smooth at any \(y \in Y\), 
  and so \(F^{-1}\) is smooth. 
\end{proof}

\begin{proposition}
  If \(X, Y\) are manifolds of dimension \(n\) and \(k\), the projection map 
  \[p_1 : X \times Y \to X : (x, y) \mapsto x\]
  is a submersion.
\end{proposition}
\begin{proof}
  Exercise.
\end{proof}

\begin{proposition}
  Let \(X, Y\) be manifolds of dimension \(n\) and \(k\), and let \(F : X \to Y\) 
  be a submersion (so \(k \le n\)). Then \(F\) is an open map, i.e. for any 
  open subset \(W \subseteq X\), \(F(W)\) is open in \(Y\).
\end{proposition}
\begin{proof}
  Let \(y \in F(W)\) and we will show that \(F(W)\) is locally open as \(y\). 
  Let \(x \in F^{-1}(y) \cap W\) and suppose \((U, f)\) be a chart at \(x\) 
  contained in \(W\) and \((V, g)\) be a chart at \(y\) such that 
  \(F(U) \subseteq V\). Since \(F\) is a submersion, the function 
  \[\tilde F := g \circ F \circ f^{-1} : f(U) \to g(V)\]
  is smooth and has rank \(k\) at \(f(x)\), and so \(f(x)\) is a regular point 
  of \(\tilde F\). Then, by the implicit function theorem, 
  there exists an open set \(U' \subseteq f(U)\) containing \(f(x)\) and a 
  diffeomorphism \(h : U' \to h(U')\) such that 
  \(\tilde F \circ h^{-1} = \pi : h(U') \to \mathbb{R}^k\) is the standard 
  projection.

  Now as the standard projection and diffeomorphisms are an open maps, we have 
  \(\tilde F = \pi \circ h\) is also an open map, and in particular, 
  \(\tilde F(U')\) is open. Hence, as \(g\) is a homeomorphism, 
  \(\tilde F(U') = g(F(f^{-1}(U')))\) is open in \(g(V)\) implies 
  \(F(f^{-1}(U')) \subseteq F(U) \subseteq F(W)\) is open in \(Y\). Thus, 
  \(F(W)\) is locally open at \(y\), and so \(F(W)\) is open and \(F\) is an 
  open map.
\end{proof}

\end{document}
